# phpMyAdmin MySQL-Dump
# version 2.3.2
# http://www.phpmyadmin.net/ (download page)
#
# Host: localhost
# Erstellungszeit: 20. Juni 2003 um 17:31
# Server Version: 3.23.49
# PHP-Version: 4.1.2
# Datenbank: `Contenido standard`

#
# Daten für Tabelle `!PREFIX!_clients`
#

INSERT INTO !PREFIX!_clients VALUES (1, 'Kunde', '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', '', '<!--{contenido_root}-->/cms/', '<!--{contenido_web}-->cms/', 0, 0);

#
# Daten für Tabelle `!PREFIX!_clients_lang`
#

INSERT INTO !PREFIX!_clients_lang VALUES (1, 1, 1);

#
# Daten für Tabelle `!PREFIX!_lang`
#

INSERT INTO !PREFIX!_lang VALUES (1, 'deutsch', 1, '', '0000-00-00 00:00:00', '0000-00-00 00:00:00', 'iso-8859-1');

#
# Dumping data for table `!PREFIX!_mod`
#

INSERT INTO !PREFIX!_mod VALUES (1, 1, 'Headline (HTML)', 'Eine HTML Headline', 1, '', '<?php echo "CMS_HTMLHEAD[1]"; ?>', '', 0, 'admin', '2003-05-15 12:02:41', '2003-05-15 12:04:07');
INSERT INTO !PREFIX!_mod VALUES (2, 1, 'Text (HTML)', 'Ein HTML Text', 1, '', '<?php echo "CMS_HTML[1]"; ?>', '', 0, 'admin', '2003-05-15 12:04:32', '2003-05-15 12:04:32');
INSERT INTO !PREFIX!_mod VALUES (3, 1, 'Bild (1)', 'Ein Bild', 1, '', '<?php\r\n\r\nif ("CMS_IMG[1]" != "") {\r\n\r\n    $img = \'<img src="CMS_IMG[1]" border="0">\';\r\n\r\n    if ("CMS_LINK[1]" != "http://") {\r\n        $img = sprintf(\'<a href="%s" target="%s">%s</a>\',"CMS_LINK[1]", "CMS_LINKTARGET[1]", $img);\r\n\r\n    }\r\n\r\n    echo $img;\r\n\r\n}\r\n\r\necho "<br>";\r\necho "CMS_IMGDESCR[1]";\r\necho "<br>";\r\necho "CMS_LINKDESCR[1]";\r\necho "<br>";\r\n\r\n?>', '', 0, 'admin', '2003-05-15 12:06:38', '2003-05-15 17:19:31');
INSERT INTO !PREFIX!_mod VALUES (4, 1, 'Artikelliste', 'Listet Artikel einer Kategorie mit der 1. Headline', 1, '/**\r\n* Artikelliste mit I1,H1,T1\r\n*\r\n* Erstellt eine Liste mit allen Artikel bis\r\n* auf den Startartikel.\r\n*\r\n* INPUT\r\n*\r\n* Author Jan Lengowski\r\n* Copyright four for business AG\r\n*/\r\n\r\n// selected category\r\n$selected = "CMS_VALUE[0]";\r\n\r\necho "<table cellspacing=\\"0\\" cellpadding=\\"10\\" border=\\"0\\">\r\n        <tr valign=\\"top\\">\r\n          <td>Kategorie wählen:</td>\r\n          <td>\r\n            <select name=\\"CMS_VAR[0]\\">";\r\n            if($selected!="0" && $selected!=""){\r\n             echo"<option value=\\"0\\">--- kein ---</option>";\r\n\r\n            }else{\r\n            echo"<option selected=\\"selected\\" value=\\"0\\">--- kein ---</option>";\r\n            }\r\n\r\n            // fetch all categorys\r\n            $query = "SELECT A.idcat, A.level, C.name FROM ".$cfg["tab"]["cat_tree"]." AS A, ".\r\n                     $cfg["tab"]["cat"]." AS B,  ".$cfg["tab"]["cat_lang"]." AS C WHERE A.idcat=B.idcat ".\r\n                     "AND B.idcat=C.idcat AND C.idlang=\'$lang\' AND B.idclient=\'$client\' ".\r\n                     "AND C.visible=1 ORDER BY A.idtree";\r\n            // execute query\r\n            $db->query($query);\r\n\r\n            // loop result and build the options\r\n            while ($db->next_record()) {\r\n\r\n              // indent spacer\r\n              $spaces = "|";\r\n\r\n              // how many levels\r\n              $levels = $db->f("level");\r\n\r\n              for ($i = 0; $i < $levels; $i ++) {\r\n                // add 2 spaces for every level\r\n                $spaces = $spaces . "--";\r\n\r\n              } // end for\r\n              \r\n              $spaces .= ">";\r\n\r\n\r\n              if ($selected == $db->f("idcat")) {\r\n                // selected category\r\n                echo "<option selected=\\"selected\\" value=\\"". $db->f("idcat") ."\\">". $spaces . $db->f("name") ."</option>";\r\n\r\n              } else {\r\n                // category\r\n                echo "<option value=\\"". $db->f("idcat") ."\\">". $spaces . $db->f("name") ."</option>";\r\n\r\n              } // end if\r\n\r\n            } // end while\r\n\r\necho "      </select>";\r\n\r\necho "    </td>\r\n        </tr>\r\n        <tr>\r\n          <td>Überschrift</td>\r\n          <td><input type=\\"text\\" name=\\"CMS_VAR[2]\\" value=\\"CMS_VALUE[2]\\"></td>\r\n        </tr>\r\n        <tr>\r\n          <td>Angezeigte Länge in Zeichen</td>\r\n          <td><input type=\\"text\\" name=\\"CMS_VAR[3]\\" value=\\"CMS_VALUE[3]\\"></td>\r\n        </tr>\r\n\r\n      </table>";\r\n', '<?php\r\n/***********************************************\r\n* CONTENIDO MODUL - OUTPUT\r\n*\r\n* REFERENZ MODUL / ARTIKELLISTE\r\n*\r\n* Artikelliste mit Img 1, Head 1, Head 2\r\n*\r\n* Erstellt eine Liste mit allen Artikel bis\r\n* auf den Startartikel.\r\n*\r\n* Author      :     Jan Lengowski\r\n* Copyright   :     four for business AG\r\n* Created     :     15-08-2002\r\n* Modified    :     16-08-2002\r\n************************************************/\r\n\r\n// second db class instance\r\n$db2 = new DB_Contenido;\r\n\r\n// selected category\r\n$selcat = "CMS_VALUE[0]";\r\n\r\n if($selcat!="0" && $selcat!=""){\r\n\r\n// select all articles in category widthout start article\r\n$query = "SELECT ARTLANG.idart, ARTLANG.idartlang FROM ".$cfg["tab"]["cat_art"]." AS CATART, ".\r\n          $cfg["tab"]["art_lang"]." AS ARTLANG ".\r\n         "WHERE CATART.idcat = \'$selcat\' AND ARTLANG.idart = CATART.idart AND ARTLANG.idlang = \'$lang\' AND ".\r\n         "ARTLANG.online = \'1\' ORDER BY CATART.idart DESC";\r\n\r\n// execute query\r\n$db->query($query);\r\n\r\nunset($articleID);\r\nunset($linkID);\r\n\r\n// get id\'s of sub articles\r\nwhile ($db->next_record()) {\r\n  $articleID[] = $db->f("idartlang");\r\n  $linkID[] = $db->f("idart");\r\n} // end while\r\n\r\n// loop through subarticles\r\n\r\necho \'\r\n<table width="165" border="0" cellspacing="0" cellpadding="0">\r\n<tr><td height="30" colspan="2" ></td></tr>\r\n<tr><td height="21" width="22" style="border: 0px; border-top:1px; border-bottom:1px; border-color: #F7C473; border-style: solid; background-color: #FCF2D5"><img src="images/wuerfel.gif" width="22" height="21" border="0"></td>\r\n<td width="143" style="border: 1px; border-left:0px; border-color: #F7C473; border-style: dashed; background-color: #FCF2D5; padding-left:10px" class="punkte">CMS_VALUE[2]</td></tr>\r\n\';\r\n\r\nif (is_array($articleID)) {\r\n\r\n    foreach ($articleID as $key => $value) {\r\n\r\n          // select all CMS variables of the article\r\n          $sql = "SELECT * FROM ".$cfg["tab"]["content"]." WHERE idartlang = \'$value\' AND idtype = \'1\' AND typeid = \'1\'";\r\n          $db->query($sql);\r\n          $db->next_record();\r\n          $head = $db->f("value");\r\n\r\n          if ( strlen($head) > "CMS_VALUE[3]") {\r\n            $head = substr($head, 0, "CMS_VALUE[3]");\r\n            $head .= \'..\';\r\n          }\r\n\r\n          // link\r\n          $link = $sess->url("front_content.php?client=$client&lang=$lang&idcat=$selcat&idart=$linkID[$key]&m=$m&s=$s");\r\n\r\n          echo \'<tr><td colspan="2" class="text" height="22" style="border: 1px; border-top:0px; border-color: #F7C473; border-style: dashed; background-color: #FCF2D5; padding-left:10px"><a href="\'.$link.\'">\'.urldecode($db->f("value")).\'</a></td></tr>\';\r\n\r\n    } // end while\r\n\r\n\r\n\r\n          unset($headline);\r\n        unset($text);\r\n        \r\n    } // end foreach\r\n    \r\n} // end if (is_array)\r\n\r\necho \'</table><br>\';\r\n\r\n\r\n?>\r\n\r\n', '', 0, 'sysadmin', '2003-05-15 12:16:31', '2003-06-20 17:50:24');
INSERT INTO !PREFIX!_mod VALUES (10, 1, 'Service Navigation', 'Die Servicenavigation', 1, '// selected category\r\n$selected = "CMS_VALUE[0]";\r\n\r\necho "<table cellspacing=\\"0\\" cellpadding=\\"10\\" border=\\"0\\">\r\n        <tr valign=\\"top\\">\r\n          <td>Kategorie wählen:</td>\r\n          <td>\r\n            <select name=\\"CMS_VAR[0]\\">";\r\n            if($selected!="0" && $selected!=""){\r\n             echo"<option value=\\"0\\">--- kein ---</option>";\r\n\r\n            }else{\r\n            echo"<option selected=\\"selected\\" value=\\"0\\">--- kein ---</option>";\r\n            }\r\n\r\n            // fetch all categorys\r\n            $query = "SELECT A.idcat, A.level, C.name FROM ".$cfg["tab"]["cat_tree"]." AS A, ".\r\n                     $cfg["tab"]["cat"]." AS B,  ".$cfg["tab"]["cat_lang"]." AS C WHERE A.idcat=B.idcat ".\r\n                     "AND B.idcat=C.idcat AND C.idlang=\'$lang\' AND B.idclient=\'$client\' ".\r\n                     "AND C.visible=1 ORDER BY A.idtree";\r\n            // execute query\r\n            $db->query($query);\r\n\r\n            // loop result and build the options\r\n            while ($db->next_record()) {\r\n\r\n              // indent spacer\r\n              $spaces = "|";\r\n\r\n              // how many levels\r\n              $levels = $db->f("level");\r\n\r\n              for ($i = 0; $i < $levels; $i ++) {\r\n                // add 2 spaces for every level\r\n                $spaces = $spaces . "--";\r\n\r\n              } // end for\r\n              \r\n              $spaces .= ">";\r\n\r\n\r\n              if ($selected == $db->f("idcat")) {\r\n                // selected category\r\n                echo "<option selected=\\"selected\\" value=\\"". $db->f("idcat") ."\\">". $spaces . $db->f("name") ."</option>";\r\n\r\n              } else {\r\n                // category\r\n                echo "<option value=\\"". $db->f("idcat") ."\\">". $spaces . $db->f("name") ."</option>";\r\n\r\n              } // end if\r\n\r\n            } // end while\r\n\r\necho "      </select>";\r\n\r\necho "    </td>\r\n        </tr>\r\n      </table>";\r\n', '<?php\r\n\r\ninclude_once($cfg["path"]["contenido"].$cfg["path"]["includes"]."functions.con.php");\r\n\r\n$catStart = "CMS_VALUE[0]";\r\n\r\nif ($catStart != "") {\r\n  $catIds = conDeeperCategoriesArray($catStart);\r\n\r\n  echo \'<table cellpadding="0" cellspacing="0" border="0"><tr>\';\r\n  echo \'<td><img src="images/wuerfel.gif"></td>\';\r\n\r\n  if ( is_array($catIds) ) {\r\n\r\n    foreach($catIds as $key=>$val) {\r\n      // Ersten Eintrag ueberspringen, weil das der Menupunkt selbst ist\r\n      // und nicht angezeigt werden soll.\r\n      if ($key != 0) {\r\n\r\n        $sql = "SELECT CAT.idcat AS idcat, name FROM ".\r\n               $cfg["tab"]["cat"]." AS CAT, ".\r\n               $cfg["tab"]["cat_lang"]." AS CATLANG \r\n               WHERE CAT.idcat = ".$val."\r\n               AND CAT.idcat = CATLANG.idcat\r\n               AND CATLANG.idlang = \'$lang\'\r\n               AND CATLANG.visible = \'1\'";\r\n\r\n        $db->query($sql);\r\n\r\n\r\n        while ( $db->next_record() ) {\r\n          echo \'<td height="21" class=".navigation" style="border: 0px; border-top:1px; border-color: #F7C473; border-style: dashed; background-color: #FFFFFF; padding-left:7px; padding-right:7px;">\r\n          <a class="klein" href="front_content.php?idcat=\'.$db->f("idcat").\'">\'.$db->f("name").\'</a></td>\';\r\n        } // end while\r\n      } // if\r\n    }  // end foreach\r\n  } // end if (is_array)\r\n\r\n  echo \'</tr></table>\';\r\n\r\n}\r\n?>', '', 0, 'sysadmin', '2003-05-15 16:10:53', '2003-11-22 15:10:19');
INSERT INTO !PREFIX!_mod VALUES (5, 1, 'Subheadline (HTML)', '', 1, '', '<?php echo "CMS_HTMLHEAD[2]"; ?>', '', 0, 'admin', '2003-05-15 12:52:59', '2003-05-15 12:52:59');
INSERT INTO !PREFIX!_mod VALUES (6, 1, 'Bild (2)', '', 1, '', '<?php\r\n\r\nif ("CMS_IMG[2]" != "") {\r\n\r\n    $img = \'<img src="CMS_IMG[2]" border="0">\';\r\n\r\n    if ("CMS_LINK[2]" != "http://") {\r\n        $img = sprintf(\'<a href="%s" target="%s">%s</a>\',"CMS_LINK[2]", "CMS_LINKTARGET[2]", $img);\r\n\r\n    }\r\n\r\n    echo $img;\r\n\r\n}\r\n\r\necho "<br>";\r\necho "CMS_IMGDESCR[2]";\r\necho "<br>";\r\necho "CMS_LINKDESCR[2]";\r\necho "<br>";\r\n\r\n?>', '', 0, 'admin', '2003-05-15 13:15:13', '2003-05-15 16:54:28');
INSERT INTO !PREFIX!_mod VALUES (7, 1, 'Bild (3)', '', 1, '', '<?php\r\n\r\nif ("CMS_IMG[3]" != "") {\r\n\r\n    $img = \'<img src="CMS_IMG[3]" border="0">\';\r\n\r\n    if ("CMS_LINK[3]" != "http://") {\r\n        $img = sprintf(\'<a href="%s" target="%s">%s</a>\',"CMS_LINK[3]", "CMS_LINKTARGET[3]", $img);\r\n\r\n    }\r\n\r\n    echo $img;\r\n\r\n}\r\n\r\necho "<br>";\r\necho "CMS_IMGDESCR[3]";\r\necho "<br>";\r\necho "CMS_LINKDESCR[3]";\r\necho "<br>";\r\n\r\n?>', '', 0, 'admin', '2003-05-15 13:15:25', '2003-05-15 16:54:37');
INSERT INTO !PREFIX!_mod VALUES (8, 1, 'Bild (4)', '', 1, '', '<?php\r\n\r\nif ("CMS_IMG[4]" != "") {\r\n\r\n    $img = \'<img src="CMS_IMG[4]" border="0">\';\r\n\r\n    if ("CMS_LINK[4]" != "http://") {\r\n        $img = sprintf(\'<a href="%s" target="%s">%s</a>\',"CMS_LINK[4]", "CMS_LINKTARGET[4]", $img);\r\n\r\n    }\r\n\r\n    echo $img;\r\n\r\n}\r\n\r\necho "<br>";\r\necho "CMS_IMGDESCR[4]";\r\necho "<br>";\r\necho "CMS_LINKDESCR[4]";\r\necho "<br>";\r\n\r\n?>', '', 0, 'admin', '2003-05-15 13:15:43', '2003-05-15 16:54:45');
INSERT INTO !PREFIX!_mod VALUES (9, 1, 'Hauptnavigation', '', 1, '/**\r\n * Navigation\r\n *\r\n * INPUT\r\n *\r\n * @autor Jan Lengowski <Jan.Lengowski@4fb.de>\r\n * @copyright four for business AG 2003\r\n */\r\n\r\n?>\r\n<table cellspacing="0" cellpadding="0" cellpadding="4">\r\n\r\n    <tr>\r\n        <td class="text">Baum wählen:</td>\r\n        <td>\r\n            <select name="CMS_VAR[0]">\r\n            <option value="0">-- kein --</option>\r\n            <?php\r\n\r\n                $sql = "SELECT\r\n                            A.idcat,\r\n                            C.name\r\n                        FROM\r\n                            ".$cfg["tab"]["cat_tree"]." AS A,\r\n                            ".$cfg["tab"]["cat"]." AS B,\r\n                            ".$cfg["tab"]["cat_lang"]." AS C\r\n                        WHERE\r\n                            A.idcat     = B.idcat AND\r\n                            B.idcat     = C.idcat AND\r\n                            C.idlang    = \'".$lang."\' AND\r\n                            B.idclient  = \'".$client."\' AND\r\n                            C.visible   = 1 AND\r\n                            A.level     = \'0\'\r\n                        ORDER BY\r\n                            A.idtree";\r\n\r\n                $db->query($sql);\r\n\r\n                while ( $db->next_record() ) {\r\n\r\n                    if ( "CMS_VALUE[0]" == $db->f("idcat") ) {\r\n                        echo \'<option selected="selected" value="\'.$db->f("idcat").\'">\'.$db->f("name").\'</option>\';\r\n\r\n                    } else {\r\n                        echo \'<option value="\'.$db->f("idcat").\'">\'.$db->f("name").\'</option>\';\r\n\r\n                    }\r\n                }\r\n\r\n            ?>\r\n            </select>\r\n        </td>\r\n    </tr>\r\n\r\n</table>\r\n\r\n<?php\r\n\r\n', '<?php\r\n\r\n/***********************************************\r\n* CONTENIDO MODUL - OUTPUT\r\n*\r\n* Modulname   :     Navigation 1.1\r\n* Author      :     Jan Lengowski\r\n* Copyright   :     Contenido - four for business\r\n* Created     :     15-05-2003\r\n* Modified    :     26-05-2003\r\n************************************************/\r\n\r\nif ( !is_object($db2) ) {\r\n    $db2 = new DB_Contenido;\r\n}\r\n\r\n/**\r\n * Check if a category is child\r\n * of another category\r\n *\r\n * @return boolean true/false\r\n * @author Jan Lengowski <Jan.Lengowski@4fb.de>\r\n * @copyright four for business AG 2003\r\n */\r\nfunction catIsChildOf($id, $idparent) {\r\n\r\n    global $cfg, $client, $lang;\r\n\r\n    $db = new DB_Contenido;\r\n\r\n    $parent = $id;\r\n\r\n    while ( $parent != 0 ) {\r\n\r\n        $sql = "SELECT\r\n                    a.parentid\r\n                FROM\r\n                    ".$cfg["tab"]["cat"]." AS a,\r\n                    ".$cfg["tab"]["cat_lang"]." AS b\r\n                WHERE\r\n                    a.idclient  = \'".$client."\' AND\r\n                    b.idlang    = \'".$lang."\' AND\r\n                    a.idcat     = b.idcat AND\r\n                    a.idcat   = \'".$parent."\'";\r\n\r\n        $db->query($sql);\r\n        $db->next_record();\r\n\r\n        $parent = $db->f("parentid");\r\n\r\n        if ($parent == $idparent) {\r\n            return true;\r\n        }\r\n\r\n    }\r\n\r\n    return false;\r\n\r\n}\r\n\r\nif ( catIsChildOf($idcat, CMS_VALUE[0]) ) {\r\n    $sel_idcat = $idcat;\r\n} else {\r\n    $sel_idcat = CMS_VALUE[0];\r\n}\r\n\r\n/* Include Template Class */\r\ninclude_once($cfg["path"]["contenido"] . \'classes/class.template.php\');\r\n\r\n/**\r\n * Array storing alle the\r\n * navigation data\r\n */\r\n$navitems = array();\r\n\r\n\r\n/* Template Instance */\r\n$tpl = new Template;\r\n\r\n/**\r\n * Recursive function for creating\r\n * the navigation array\r\n * @param Int $idcat Category id\r\n */\r\nfunction nav($idcat) {\r\n\r\n        global $navitems, $client, $lang, $cfg;\r\n\r\n        $db  = new DB_Contenido;\r\n        $db2 = new DB_Contenido;\r\n\r\n        $sql = "SELECT parentid FROM ".$cfg["tab"]["cat"]." WHERE idcat = \'$idcat\'";\r\n\r\n        $db->query($sql);\r\n        $db->next_record();\r\n\r\n        $parentid = $db->f("parentid");\r\n\r\n        if ( $parentid == 0 ) {\r\n\r\n           if ( $idcat != CMS_VALUE[0] ){\r\n\r\n                $navitems = array();\r\n              \r\n                $sql = "SELECT\r\n                            A.idcat,\r\n                            C.name\r\n                        FROM\r\n                            ".$cfg["tab"]["cat_tree"]." AS A,\r\n                            ".$cfg["tab"]["cat"]." AS B,\r\n                            ".$cfg["tab"]["cat_lang"]." AS C\r\n                        WHERE\r\n                            A.idcat     = B.idcat   AND\r\n                            B.idcat     = C.idcat   AND\r\n                            B.idclient  = \'$client\' AND\r\n                            C.idlang    = \'$lang\'   AND\r\n                            C.visible   = \'1\'       AND\r\n                            B.parentid  = \'CMS_VALUE[0]\'\r\n                        ORDER\r\n                            BY A.idtree";\r\n\r\n                      $db->query($sql);\r\n\r\n                      while ($db->next_record()) {\r\n\r\n                            /* Check for external redirects... */\r\n                            $sql = "SELECT\r\n                                        a.external_redirect AS ext\r\n                                    FROM\r\n                                        ".$cfg["tab"]["art_lang"]." AS a,\r\n                                        ".$cfg["tab"]["cat_art"]." AS b,\r\n                                        ".$cfg["tab"]["cat"]." AS c\r\n                                    WHERE\r\n                                        b.idcat     = \'".$db->f("idcat")."\' AND\r\n                                        b.is_start  = \'1\' AND\r\n                                        c.idclient  = \'".$client."\' AND\r\n                                        c.idcat     = b.idcat AND\r\n                                        a.idart     = b.idart AND\r\n                                        a.idlang    = \'".$lang."\'";\r\n\r\n                            $db2->query($sql);\r\n                            $db2->next_record();\r\n\r\n                            $target = ( $db2->f("ext") == 0 ) ? \'_self\' : \'_blank\';\r\n\r\n                            $navitems[$db->f("idcat")] = array("idcat"      => $db->f("idcat"),\r\n                                                                "name"      => $db->f("name"),\r\n                                                                "target"    => $target);\r\n                      }\r\n\r\n           }\r\n           \r\n           return true;\r\n        }\r\n\r\n        $sql = "SELECT\r\n                    A.idcat,\r\n                    C.name\r\n                FROM\r\n                    ".$cfg["tab"]["cat_tree"]." AS A,\r\n                    ".$cfg["tab"]["cat"]." AS B,\r\n                    ".$cfg["tab"]["cat_lang"]." AS C\r\n                WHERE\r\n                    A.idcat     = B.idcat   AND\r\n                    B.idcat     = C.idcat   AND\r\n                    B.idclient  = \'$client\' AND\r\n                    C.idlang    = \'$lang\'   AND\r\n                    C.visible   = \'1\'       AND\r\n                    B.parentid  = \'$parentid\'\r\n                ORDER BY\r\n                    A.idtree";\r\n\r\n        $db->query($sql);\r\n\r\n        while ($db->next_record()) {\r\n\r\n                /* Check for external redirects... */\r\n                $sql = "SELECT\r\n                            a.external_redirect AS ext\r\n                        FROM\r\n                            ".$cfg["tab"]["art_lang"]." AS a,\r\n                            ".$cfg["tab"]["cat_art"]." AS b,\r\n                            ".$cfg["tab"]["cat"]." AS c\r\n                        WHERE\r\n                            b.idcat     = \'".$db->f("idcat")."\' AND\r\n                            b.is_start  = \'1\' AND\r\n                            c.idclient  = \'".$client."\' AND\r\n                            c.idcat     = b.idcat AND\r\n                            a.idart     = b.idart AND\r\n                            a.idlang    = \'".$lang."\'";\r\n\r\n                $db2->query($sql);\r\n                $db2->next_record();\r\n\r\n                $target = ( $db2->f("ext") == 0 ) ? \'_self\' : \'_blank\';\r\n                \r\n                $tmp_nav[$db->f("idcat")] = array("idcat"   => $db->f("idcat"),\r\n                                                  "name"    => $db->f("name"),\r\n                                                  "target"  => $target);\r\n        }\r\n\r\n        $tmp_nav[$idcat]["sub"] = $navitems;\r\n        $navitems = $tmp_nav;\r\n\r\n        /* Function call */\r\n        nav($parentid);\r\n\r\n}  // end function\r\n\r\n$sql = "SELECT\r\n            A.idcat,\r\n            C.name\r\n        FROM\r\n            ".$cfg["tab"]["cat_tree"]." AS A,\r\n            ".$cfg["tab"]["cat"]." AS B,\r\n            ".$cfg["tab"]["cat_lang"]." AS C\r\n        WHERE\r\n            A.idcat     = B.idcat   AND\r\n            B.idcat     = C.idcat   AND\r\n            B.idclient  = \'$client\' AND\r\n            C.idlang    = \'$lang\'   AND\r\n            C.visible   = \'1\'       AND\r\n            B.parentid  = \'$sel_idcat\'\r\n        ORDER BY\r\n            A.idtree";\r\n\r\n$db->query($sql);\r\n\r\nwhile ( $db->next_record() ) {\r\n\r\n        /* Check for external redirects... */\r\n        $sql = "SELECT\r\n                    a.external_redirect AS ext\r\n                FROM\r\n                    ".$cfg["tab"]["art_lang"]." AS a,\r\n                    ".$cfg["tab"]["cat_art"]." AS b,\r\n                    ".$cfg["tab"]["cat"]." AS c\r\n                WHERE\r\n                    b.idcat     = \'".$db->f("idcat")."\' AND\r\n                    b.is_start  = \'1\' AND\r\n                    c.idclient  = \'".$client."\' AND\r\n                    c.idcat     = b.idcat AND\r\n                    a.idart     = b.idart AND\r\n                    a.idlang    = \'".$lang."\'";\r\n\r\n        $db2->query($sql);\r\n        $db2->next_record();\r\n\r\n        $target = ( $db2->f("ext") == 0 ) ? \'_self\' : \'_blank\';\r\n\r\n        $navitems[$db->f("idcat")] = array("idcat"  => $db->f("idcat"),\r\n                                           "name"   => $db->f("name"),\r\n                                           "target" => $target);\r\n}\r\n\r\n/* Create Navigation Array */\r\nnav($sel_idcat);\r\n\r\n/* Start Output buffer */\r\nob_start();\r\n\r\necho \'<table cellspacing="0" cellpadding="0" border="0">\';\r\n\r\nforeach ($navitems as $key => $data) {\r\n\r\n    /* 1. Navigations Ebene */\r\n    $tpl->reset();\r\n    $tpl->set(\'d\', \'NAME\',  $data[\'name\']);\r\n    $tpl->set(\'d\', \'TARGET\', $data[\'target\']);\r\n    $tpl->set(\'d\', \'HREF\',  $sess->url(\'front_content.php?idcat=\'.$data[\'idcat\']));\r\n    $tpl->next();\r\n\r\n    if ($idcat == $data[\'idcat\'] || is_array($data[\'sub\'])) {\r\n        $tpl->generate(\'templates/navfirst_on.html\');\r\n    } else {\r\n        $tpl->generate(\'templates/navfirst_off.html\');\r\n    }\r\n\r\n    if (is_array($data[\'sub\'])) {\r\n\r\n        foreach ($data[\'sub\'] as $key => $data) {\r\n\r\n            /* 2. Navigations Ebene */\r\n            $tpl->reset();\r\n            $tpl->set(\'d\', \'NAME\',  $data[\'name\']);\r\n            $tpl->set(\'d\', \'TARGET\', $data[\'target\']);\r\n            $tpl->set(\'d\', \'HREF\',  $sess->url(\'front_content.php?idcat=\'.$data[\'idcat\']));\r\n            $tpl->next();\r\n\r\n            if ($idcat == $data[\'idcat\'] || is_array($data[\'sub\'])) {\r\n                $tpl->generate(\'templates/navsecond_on.html\');\r\n            } else {\r\n                $tpl->generate(\'templates/navsecond_off.html\');\r\n            }\r\n\r\n            if (is_array($data[\'sub\'])) {\r\n\r\n                foreach ($data[\'sub\'] as $key => $data) {\r\n\r\n                    /* 3. Navigations Ebene */\r\n                    $tpl->reset();\r\n                    $tpl->set(\'d\', \'NAME\',  $data[\'name\']);\r\n                    $tpl->set(\'d\', \'TARGET\', $data[\'target\']);\r\n                    $tpl->set(\'d\', \'HREF\',  $sess->url(\'front_content.php?idcat=\'.$data[\'idcat\']));\r\n                    $tpl->next();\r\n\r\n                    if ($idcat == $data[\'idcat\']) {\r\n                        $tpl->generate(\'templates/navthird_on.html\');\r\n                    } else {\r\n                        $tpl->generate(\'templates/navthird_off.html\');\r\n                    }\r\n\r\n                } // end foreach\r\n\r\n            } // end if\r\n\r\n        } // end foreach\r\n\r\n    } // end if\r\n\r\n} // end foreach\r\n\r\necho \'</table>\';\r\n\r\n/* Read out buffer */\r\n$html = ob_get_contents();\r\n\r\n/* Clean buffer */\r\nob_end_clean();\r\n\r\n/* Output buffer-contents */\r\necho $html;\r\n\r\n?>', '', 0, 'admin', '2003-05-15 13:46:50', '2003-06-25 17:01:44');
INSERT INTO !PREFIX!_mod VALUES (12, 1, 'Login', 'Simple Login Module', 1, '', '<table width="165" border="0" cellspacing="0" cellpadding="0">\r\n<tr><td height="30" colspan="2" ></td></tr>\r\n<tr><td height="21" width="22" style="border: 0px; border-top:1px; border-bottom:1px; border-color: #F7C473; border-style: solid; background-color: #FCF2D5"><img src="images/wuerfel.gif" width="22" height="21" border="0"></td>\r\n<td width="143" style="border: 1px; border-left:0px; border-color: #F7C473; border-style: dashed; background-color: #FCF2D5; padding-left:10px" class="punkte">Login</td></tr>\r\n<tr><td colspan="2" class="text" height="22" style="border: 1px; border-top:0px; border-color: #F7C473; border-style: dashed; background-color: #FCF2D5; padding-left:10px">\r\n<?php\r\n\r\nif ($auth->auth["uid"] == "nobody")\r\n{\r\n?>\r\n<form method="post" action="front_content.php?idcatart=<?php echo $idcatart; ?>">\r\n<table border="0">\r\n<tr><td>Benutzername</td></tr>\r\n<tr><td><input type="input" name="username" value=""></td></tr>\r\n<tr><td>Passwort</td></tr>\r\n<tr><td><input type="password" name="password" value=""></td></tr>\r\n</table>\r\n<input type="submit" name="login" value="Anmelden">\r\n</form><br>\r\n<?php\r\n} else {\r\n?>\r\nAngemeldet als: <br> <?php echo $auth->auth["uname"]; ?>\r\n<br><br>\r\n<form method="post" action="front_content.php?idcatart=<?php echo $idcatart; ?>">\r\n<input type="submit" name="logout" value="Abmelden">\r\n</form><br>\r\n<?php\r\n}\r\n?>\r\n</td></tr></table>', '', 0, 'sysadmin', '2003-10-31 13:15:18', '2003-10-31 13:28:04');
    

#
# Daten für Tabelle `!PREFIX!_phplib_auth_user_md5`
#

INSERT INTO !PREFIX!_phplib_auth_user_md5 VALUES ('21232f297a57a5a743894a0e4a801fc3', 'admin', '21232f297a57a5a743894a0e4a801fc3', 'admin[1]', 'Administrator Kunde', 'admin_kunde@IhreSite.de', '', '', '', '', '', 1);
INSERT INTO !PREFIX!_phplib_auth_user_md5 VALUES ('48a365b4ce1e322a55ae9017f3daf0c0', 'sysadmin', '48a365b4ce1e322a55ae9017f3daf0c0', 'sysadmin', 'Systemadministrator', 'sysadmin@IhreSite.de', '', '', '', '', '', 1);

#
# Daten für Tabelle `'!PREFIX!_rights`
#


