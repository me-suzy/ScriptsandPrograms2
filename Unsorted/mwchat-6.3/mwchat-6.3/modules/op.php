<?PHP
  if ($STATUS[Admin] == "yes" or $STATUS[Operator] == "yes") { $rgMatches[3] = Clean_Variable($rgMatches[3], "lowercase"); if (!empty($rgMatches[3]) and $rgMatches[3] != $Username) { $rgMatches[3] = Clean_Variable($rgMatches[3], "all"); $rgUsers_SELECT = db_query(Validate(15), $CONN); $szUsers = db_numrows($rgUsers_SELECT); if ($szUsers == "1") { $rgUsers_UPDATE = db_query("UPDATE chat_users SET operator='yes' WHERE username='$rgMatches[3]'", $CONN); Post_System("$rgMatches[3] $LOCALE[COMMON_Operator]", "local", $Room); $rgUsers_SELECT = db_query(Validate(10), $CONN); while ($rgRoomInfo = db_fetch($rgUsers_SELECT)) { $rgProcess_INSERT = db_query("INSERT INTO chat_process VALUES(NULL, '$rgRoomInfo[username]', 'reload-all', NULL)", $CONN); } } else { Post_System("<I>$rgMatches[3] $LOCALE[DIALOG_Not_Online]</I>", "syntax", $Room); } } else { Post_System("<B>$LOCALE[DIALOG_Syntax_Error]</B> - /$rgMatches[1] { $LOCALE[COMMON_Username] }", "syntax", $Room); } } else { Post_System("<B>$LOCALE[DIALOG_Syntax_Error]</B> - /$rgMatches[1] $LOCALE[DIALOG_OP_Only]", "syntax", $Room); } ?>
