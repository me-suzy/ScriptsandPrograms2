<?PHP
  if ($STATUS[Admin] == "yes" or $STATUS[Operator] == "yes") { if (!empty($rgMatches[3])) { $rgMatches[3] = Clean_Variable($rgMatches[3], "html"); $rgMatches[3] = Profanity_Check($rgMatches[3], "clean"); $rgRooms_UPDATE = db_query("UPDATE chat_rooms SET topic='$rgMatches[3]' WHERE title='$Room'", $CONN); Post_System("$Username $LOCALE[DIALOG_Topic_Updated]", "local", $Room); $rgUsers_SELECT = db_query(Validate(10), $CONN); while ($rgUsers = db_fetch($rgUsers_SELECT)) { $rgProcess_INSERT = db_query("INSERT INTO chat_process VALUES(NULL, '$rgUsers[username]', 'reload-all', NULL)", $CONN); } } else { Post_System("<B>$LOCALE[DIALOG_Syntax_Error]</B> - /$rgMatches[1] { $LOCALE[COMMON_Topic] }", "syntax", $Room); } } else { Post_System("<B>$LOCALE[DIALOG_Syntax_Error]</B> - /$rgMatches[1] $LOCALE[DIALOG_OP_Only]", "syntax", $Room); } ?>
