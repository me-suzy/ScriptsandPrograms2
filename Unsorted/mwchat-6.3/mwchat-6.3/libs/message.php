<?PHP
  Update_TimeStamp($Username); $Message = clean_variable($Message, "html"); if (isset($Message) and !empty($Message) and strlen(clean_variable($Message, "spaces")) > 0) { if (preg_match("%^/(\S+?)($|\s+(\S.*))%",$Message,$rgMatches)) { reset($CONFIG[MWCHAT_Command_Aliases]); while (list($szCommand, $szAlias) = each($CONFIG[MWCHAT_Command_Aliases])) { if ($rgMatches[1] == $szAlias) { $rgMatches[1] = $szCommand; } } $rgArgs = explode(' ', $rgMatches[3]); $szDialogCommand = strstr($rgMatches[3], ' '); if (file_exists("$CONFIG[MWCHAT_Modules]/$rgMatches[1].php") and $rgMatches[1] != "index") { require_once("$CONFIG[MWCHAT_Modules]/$rgMatches[1].php"); } else { Post_System("<B>$LOCALE[DIALOG_Syntax_Error]</B> - /$rgMatches[1] $LOCALE[COMMON_Function_Invalid]", "syntax", $Room); } } else { if (!empty($PrivateUser)) { Post_Private($PrivateUser, $Message); } else { Post_Public($Username, $Message); } } } ?>
