<?PHP
  require_once("./$CONFIG[MWCHAT_Libs]/db_open.php"); $STATUS[Sequence] = base64_decode($Sequence_Check); if ($STATUS[Sequence] != $STATUS[CLIENT_IP]) { Remove_User($Username); Error("ERROR_IP"); exit; } $rgLobby_SELECT = db_query(Validate(18), $CONN); $szValidEntries = db_numrows($rgLobby_SELECT); if ($szValidEntries == "0") { Remove_User($Username); Error("ERROR_Expired"); } else { if ($CONFIG[MWCHAT_Name] != "lobby.php") { $rgUsers_SELECT = db_query(Validate(19), $CONN); while($rgUsers = db_fetch($rgUsers_SELECT)) { $STATUS[Operator] = $rgUsers[operator]; $STATUS[Away] = $rgUsers[away]; } $szUser = db_numrows($rgUsers_SELECT); if ($szUser == "0") { Remove_User($Username); Error("ERROR_Expired"); } } while($rgDetails = db_fetch($rgLobby_SELECT)) { $STATUS[Admin] = $rgDetails[administrator]; $STATUS[Registered] = $rgDetails[registered]; $STATUS[TextColor] = $rgDetails[text_color]; } if ($STATUS[Registered] == "yes") { $rgRegistered_SELECT = db_query(Validate(8), $CONN); while($rgRegistered = db_fetch($rgRegistered_SELECT)) { $STATUS[Smiles] = $rgRegistered[smiles]; $STATUS[message_enter] = $rgRegistered[message_enter]; $STATUS[message_exit] = $rgRegistered[message_exit]; $STATUS[message_away] = $rgRegistered[message_away]; $STATUS[message_back] = $rgRegistered[message_back]; $STATUS[RegText] = $rgRegistered[text_color]; $STATUS[Upload] = $rgRegistered[upload]; $STATUS[Ignored] = $rgRegistered[ignored_users]; $STATUS[Icon] = $rgRegistered[icon]; $STATUS[Theme] = $rgRegistered[theme]; } } } ?>
