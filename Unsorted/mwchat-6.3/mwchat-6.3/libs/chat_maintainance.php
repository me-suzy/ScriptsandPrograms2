<?PHP
  $rgMaintainanceRooms_SELECT = db_query(Validate(29), $CONN); while($rgMaintainanceRooms = db_fetch($rgMaintainanceRooms_SELECT)) { $rgUsers_SELECT = db_query("SELECT id FROM chat_users WHERE room='$rgMaintainanceRooms[title]'", $CONN); $szUsers = db_numrows($rgUsers_SELECT); if ($szUsers == "0") { $rgMaintainanceRooms_DELETE = db_query("DELETE FROM chat_rooms WHERE title='$rgMaintainanceRooms[title]'",$CONN); } } $rgLobby_SELECT = db_query(Validate(30),$CONN); while($rgMainTainanceTimes = db_fetch($rgLobby_SELECT)) { $szUserTime_Year = substr($rgMainTainanceTimes[timestamp], 0, 4); $szUserTime_Month = substr($rgMainTainanceTimes[timestamp], 4, 2); $szUserTime_Day = substr($rgMainTainanceTimes[timestamp], 6, 2); $szUserTime_Hour = substr($rgMainTainanceTimes[timestamp], 8, 2); $szUserTime_Min = substr($rgMainTainanceTimes[timestamp], 10, 2); $szUserTime_Sec = substr($rgMainTainanceTimes[timestamp], 12, 2); $szCurrentTime = date("YmdHis", time()); $szTime_Check = date ("YmdHis", mktime (($szUserTime_Hour + $CONFIG[Room_Expire_Hours]),($szUserTime_Min + $CONFIG[Room_Expire_Minutes]),($szUserTime_Sec + $CONFIG[Room_Expire_Seconds]),$szUserTime_Month,$szUserTime_Day,$szUserTime_Year)); if ($szTime_Check < $szCurrentTime) { Remove_User($rgMainTainanceTimes[username]); } } ?>
