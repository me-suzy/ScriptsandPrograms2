<?PHP
  $CONFIG[MWCHAT_Config] = "config"; $CONFIG[MWCHAT_Libs] = "libs"; $CONFIG[MWCHAT_Images] = "images"; $CONFIG[MWCHAT_Locales] = "locales"; $CONFIG[MWCHAT_Themes] = "themes"; $CONFIG[MWCHAT_Modules] = "modules"; $CONFIG[MWCHAT_Upload] = "files"; $CONFIG[All_Smiles] = array('cool', 'crazy', 'cry', 'evil', 'frustrated', 'grin', 'lol', 'mad', 'rolleye', 'sleep', 'smile', 'smoke', 'tounge', 'whine', 'wink', 'sad'); $CONFIG[All_Lingo] = array(':\(' => 'sad', ':-\(' => 'sad', ';\(' => 'sad', ';-\(' => 'sad', ':p' => 'tounge', ';-)' => 'wink', ';)' => 'wink', ':-)' => 'smile', ':)' => 'smile', ':D' => 'grin', '8-)' => 'cool', '8)' => 'cool'); $CONFIG[MWCHAT_Command_Aliases] = array('logout' => 'exit', 'msg' => 'private', 'me' => 'action', 'bug' => 'suggest', 'whois' =>'info', 'afk' => 'away', 'unafk' => 'back', 'help' => '?', 'prefs' => 'options'); $STATUS[CLIENT_IP] = ereg_replace("\.", "", getenv('REMOTE_ADDR')); $CONFIG[System_Version] = "6.3"; $CONFIG[PHP_Version] = "4.2.1"; require_once("$CONFIG[MWCHAT_Config]/system.php"); require_once("$CONFIG[MWCHAT_Config]/license.php"); require_once("$CONFIG[MWCHAT_Config]/database.php"); require_once("$CONFIG[MWCHAT_Config]/locales.php"); require_once("$CONFIG[MWCHAT_Config]/chat.php"); require_once("$CONFIG[MWCHAT_Config]/rooms.php"); require_once("$CONFIG[MWCHAT_Config]/colors.php"); $CONFIG[System_Root] = dirname($_SERVER["SCRIPT_FILENAME"]); require_once("$CONFIG[MWCHAT_Libs]/load_language.php"); require_once("$CONFIG[MWCHAT_Libs]/help.php"); require_once("$CONFIG[MWCHAT_Libs]/detect_browser.php"); require_once("$CONFIG[MWCHAT_Libs]/validate.php"); require_once("$CONFIG[MWCHAT_Libs]/error.php"); require_once("$CONFIG[MWCHAT_Libs]/db/$CONFIG[Database_Type].php"); require_once("$CONFIG[MWCHAT_Libs]/remove_user.php"); require_once("$CONFIG[MWCHAT_Libs]/chat_log.php"); require_once("$CONFIG[MWCHAT_Libs]/clean_variable.php"); if (ini_get('register_globals') != "1") { extract ($_REQUEST); } $CONFIG[MWCHAT_Name] = basename($_SERVER["PHP_SELF"]); if ($CONFIG[MWCHAT_Name] == "login.php") { require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); } elseif ($CONFIG[MWCHAT_Name] == "lobby.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); require_once("$CONFIG[MWCHAT_Libs]/update_timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/post_system.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); } elseif ($CONFIG[MWCHAT_Name] == "chat.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); } elseif ($CONFIG[MWCHAT_Name] == "window.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/update_timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); require_once("$CONFIG[MWCHAT_Libs]/post_system.php"); require_once("$CONFIG[MWCHAT_Libs]/smiley.php"); require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); } elseif ($CONFIG[MWCHAT_Name] == "head.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); } elseif ($CONFIG[MWCHAT_Name] == "dialog.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); require_once("$CONFIG[MWCHAT_Libs]/update_timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/post_public.php"); require_once("$CONFIG[MWCHAT_Libs]/post_system.php"); require_once("$CONFIG[MWCHAT_Libs]/post_private.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); } elseif ($CONFIG[MWCHAT_Name] == "links.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); require_once("$CONFIG[MWCHAT_Libs]/update_timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/post_public.php"); require_once("$CONFIG[MWCHAT_Libs]/post_system.php"); require_once("$CONFIG[MWCHAT_Libs]/post_private.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); } elseif ($CONFIG[MWCHAT_Name] == "buddy.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); } elseif ($CONFIG[MWCHAT_Name] == "whois.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/post_system.php"); require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); } elseif ($CONFIG[MWCHAT_Name] == "register.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/post_system.php"); require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); } elseif ($CONFIG[MWCHAT_Name] == "options.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/post_system.php"); require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); } elseif ($CONFIG[MWCHAT_Name] == "myfiles.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/post_system.php"); require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); } elseif ($CONFIG[MWCHAT_Name] == "upload.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/post_system.php"); require_once("$CONFIG[MWCHAT_Libs]/profanity_check.php"); require_once("$CONFIG[MWCHAT_Libs]/post_private.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); } elseif ($CONFIG[MWCHAT_Name] == "print.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); require_once("$CONFIG[MWCHAT_Libs]/encryption.php"); } elseif ($CONFIG[MWCHAT_Name] == "about.php") { require_once("$CONFIG[MWCHAT_Libs]/timestamp.php"); } else { if ($CONFIG[MWCHAT_Name] != "index.php" and $CONFIG[MWCHAT_Name] != "license.php" and $CONFIG[MWCHAT_Name] != "help.php" and $CONFIG[MWCHAT_Name] != "view.php") { header("Location: index.php?Lang=$Lang"); exit; } } $LangInclude = Load_Language("common.php"); require_once($LangInclude); $LangInclude = Load_Language("error.php"); require_once($LangInclude); $LangInclude = Load_Language("log.php"); require_once($LangInclude); $LangInclude = Load_Language($CONFIG[MWCHAT_Name]); if (file_exists($LangInclude)) { require_once($LangInclude); } if ($CONFIG[System_Proxy] == "true") { $MetaHeaders = "<META HTTP-EQUIV=\"Pragma\" Content=\"No-cache\">\n"; $MetaHeaders .= "  <META HTTP-EQUIV=\"expires\" Content=\"Tue, 13 June 1990 1:11:11\">\n"; $MetaHeaders .= "  <META HTTP-EQUIV=\"Cache Control\" Content=\"No-cache\">\n"; } if ($CONFIG[System_Live] != "true" and $CONFIG[MWCHAT_Name] != "index.php") { Error("ERROR_Live"); } if ((!version_compare(phpversion(), $CONFIG[PHP_Version], ">=")) and ($CONFIG[MWCHAT_Name] != "index.php")) Error("ERROR_PHPV"); ?>
