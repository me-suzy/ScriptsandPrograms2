<?PHP
  require_once("./libs/requires.php"); require_once("$CONFIG[MWCHAT_Libs]/security.php"); TimeStamp($Username); $STATUS[Silentheader] = "true"; if ($Action != "GO") { $STATUS[Focus] = "Options.EnterPassword"; } require_once("$CONFIG[MWCHAT_Libs]/header.php"); if ($STATUS[Registered] == "yes") { if ($Action == "GO") { if (!empty($EnterPassword) and !empty($Confirm_Password)) { if ( (strlen($EnterPassword) < "5" or strlen($Confirm_Password) < "5") or ($EnterPassword != $Confirm_Password) ) { $LOCALE[OPTIONS_Info] = $LOCALE[COMMON_Err_Pass]; $Action = "NO"; } else { $EnterPassword = rawurlencode(base64_encode($EnterPassword)); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET password='$EnterPassword' WHERE username='$Username'", $CONN); } } if ($Action == "GO") { $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET age='$YOB' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET location='$Location' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET occupation='$Job' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET hobbies='$Hobbies' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET message_enter='$Msg_Enter' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET message_exit='$Msg_Exit' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET message_away='$Msg_Away' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET message_back='$Msg_Back' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET text_color='$Color' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET smiles='$Smiles' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET locate='$Locate' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET comments='$Comments' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET upload='$Upload' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET icon='$Icon' WHERE username='$Username'", $CONN); $rgRegistered_UPDATE = db_query("UPDATE chat_registered SET theme='$Theme' WHERE username='$Username'", $CONN); $rgProcess_INSERT = db_query(Validate(39), $CONN); $rgProcess_INSERT = db_query(Validate(40), $CONN); $rgProcess_INSERT = db_query(Validate(34), $CONN); $Action = "DONE"; } } if ($Action != "GO") { echo "  <FORM NAME=Options ACTION=\"options.php?Action=GO\" AUTOCOMPLETE=\"OFF\" METHOD=POST>\n"; echo "  <INPUT TYPE=HIDDEN NAME=Username VALUE=\"$Username\">\n"; echo "  <INPUT TYPE=HIDDEN NAME=Lang VALUE=\"$Lang\">\n"; echo "  <INPUT TYPE=HIDDEN NAME=Room VALUE=\"$Room\">\n"; echo "  <INPUT TYPE=HIDDEN NAME=Resolution VALUE=\"$Resolution\">\n"; echo "  <INPUT TYPE=HIDDEN NAME=Sequence_Check VALUE=\"$Sequence_Check\">\n"; echo "  <H2>\n"; echo "    $LOCALE[OPTIONS_Title]\n"; echo "  </H2>\n"; echo "  <HR>\n"; echo "  </CENTER>\n"; echo "  <CENTER>$LOCALE[OPTIONS_Info]<BR><BR>\n"; if ($Action == "DONE") { echo "<B>$LOCALE[OPTIONS_Complete]</B> <BR><BR>\n"; } $rgRegistered_SELECT = db_query(Validate(8), $CONN); while($rgInfo = db_fetch($rgRegistered_SELECT)) { echo "  <TABLE BORDER=0>\n"; echo "   <TR>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[COMMON_Password]</B> (" . HelpLink('Enter_Password') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=PASSWORD NAME=EnterPassword TABINDEX=1 MAXLENGTH=10 SIZE=21>\n"; echo "     </TD>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[COMMON_Confirm_Password]</B> (" . HelpLink('Confirm_Password') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=PASSWORD NAME=Confirm_Password TABINDEX=2 MAXLENGTH=10 SIZE=21>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "   <TR>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[COMMON_YOB] (1975)</B> (" . HelpLink('YOB') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=TEXT NAME=YOB TABINDEX=3 VALUE=\"$rgInfo[age]\" MAXLENGTH=4 SIZE=21>\n"; echo "     </TD>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[COMMON_Location]</B> (" . HelpLink('Location') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=TEXT NAME=Location TABINDEX=4 VALUE=\"$rgInfo[location]\" MAXLENGTH=39 SIZE=21>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "   <TR>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[COMMON_Job]</B> (" . HelpLink('Occupation') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=TEXT NAME=Job TABINDEX=5 MAXLENGTH=60 VALUE=\"$rgInfo[occupation]\"  SIZE=21>\n"; echo "     </TD>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[COMMON_Hobbies]</B> (" . HelpLink('Hobbies') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=TEXT NAME=Hobbies TABINDEX=6 MAXLENGTH=400 VALUE=\"$rgInfo[hobbies]\" SIZE=21>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "   <TR>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Msg_Enter]</B> (" . HelpLink('Enter_Message') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=TEXT NAME=Msg_Enter TABINDEX=7 MAXLENGTH=79 VALUE=\"$rgInfo[message_enter]\" SIZE=21>\n"; echo "     </TD>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Msg_Exit]</B> (" . HelpLink('Exit_Message') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=TEXT NAME=Msg_Exit TABINDEX=8 MAXLENGTH=79 VALUE=\"$rgInfo[message_exit]\"  SIZE=21>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "   <TR>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Msg_Away]</B> (" . HelpLink('Away_Message') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=TEXT NAME=Msg_Away TABINDEX=9 MAXLENGTH=79 VALUE=\"$rgInfo[message_away]\" SIZE=21>\n"; echo "     </TD>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Msg_Back]</B> (" . HelpLink('Back_Message') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=TEXT NAME=Msg_Back TABINDEX=10 MAXLENGTH=79 VALUE=\"$rgInfo[message_back]\" SIZE=21>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "   <TR>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Color] (#000000)</B> (" . HelpLink('Default_Color') . "):</FONT COLOR><BR>\n"; echo "        <INPUT TYPE=TEXT NAME=Color TABINDEX=11 MAXLENGTH=9 VALUE=\"$rgInfo[text_color]\"  SIZE=21>\n"; echo "     </TD>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Smiles]</B> (" . HelpLink('Smiles') . "):</FONT COLOR><BR>\n"; echo "        <SELECT NAME=Smiles TABINDEX=12>\n"; if ($rgInfo[smiles] == "yes") { echo "          <OPTION SELECTED VALUE=\"yes\">$LOCALE[OPTIONS_Yes]</OPTION>\n"; echo "          <OPTION VALUE=\"no\">$LOCALE[OPTIONS_No]</OPTION>\n"; } else { echo "          <OPTION VALUE=\"yes\">$LOCALE[OPTIONS_Yes]</OPTION>\n"; echo "          <OPTION SELECTED VALUE=\"no\">$LOCALE[OPTIONS_No]</OPTION>\n"; } echo "        </SELECT>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "   <TR>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Locate]</B> (" . HelpLink('Locate') . "):</FONT COLOR><BR>\n"; echo "        <SELECT NAME=Locate TABINDEX=13>\n"; if ($rgInfo[locate] == "yes") { echo "          <OPTION SELECTED VALUE=\"yes\">$LOCALE[OPTIONS_Yes]</OPTION>\n"; echo "          <OPTION VALUE=\"no\">$LOCALE[OPTIONS_No]</OPTION>\n"; } else { echo "          <OPTION VALUE=\"yes\">$LOCALE[OPTIONS_Yes]</OPTION>\n"; echo "          <OPTION SELECTED VALUE=\"no\">$LOCALE[OPTIONS_No]</OPTION>\n"; } echo "        </SELECT>\n"; echo "     </TD>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Upload]</B> (" . HelpLink('Upload') . "):</FONT COLOR><BR>\n"; echo "        <SELECT NAME=Upload TABINDEX=14>\n"; if ($rgInfo[upload] == "yes") { echo "          <OPTION SELECTED VALUE=\"yes\">$LOCALE[OPTIONS_Yes]</OPTION>\n"; echo "          <OPTION VALUE=\"no\">$LOCALE[OPTIONS_No]</OPTION>\n"; } else { echo "          <OPTION VALUE=\"yes\">$LOCALE[OPTIONS_Yes]</OPTION>\n"; echo "          <OPTION SELECTED VALUE=\"no\">$LOCALE[OPTIONS_No]</OPTION>\n"; } echo "        </SELECT>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "   <TR>\n"; echo "     <TD COLSPAN=2>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Icons]</B> (" . HelpLink('Icons') . "):</FONT COLOR><BR>\n"; $hModules = opendir("$CONFIG[System_Root]/$CONFIG[MWCHAT_Images]/smiles"); echo "     <TABLE>\n"; echo "      <TR>\n"; echo "        <TD><FONT SIZE=1><B>$LOCALE[COMMON_Topic]</B><Br><INPUT TYPE=RADIO NAME=Icon VALUE=''></TD>\n"; while($szSrtFile = readdir($hModules)) { unset($szChecked); $rgFileParts = explode(".", $szSrtFile); if ($rgFileParts[1] != "gif") { continue; } if ($rgInfo[icon] == $szSrtFile) { $szChecked = "CHECKED"; } echo "        <TD><IMG SRC='$CONFIG[MWCHAT_Images]/smiles/$szSrtFile'><Br><INPUT TYPE=RADIO NAME=Icon $szChecked  VALUE='$szSrtFile'></TD>\n"; } echo "      </TR>\n"; echo "     </TABLE>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "   <TR>\n"; echo "     <TD>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[COMMON_Comments]</B> (" . HelpLink('Comments') . "):</FONT COLOR><BR>\n"; echo "        <TEXTAREA WRAP=VIRTUAL ROWS=10 COLS=30 NAME=Comments TABINDEX=15>$rgInfo[comments]</TEXTAREA>\n"; echo "     </TD>\n"; echo "     <TD VALIGN=TOP>\n"; echo "        <FONT COLOR=\"$CONFIG[Color_Foreground]\"><B>$LOCALE[OPTIONS_Theme]</B> (" . HelpLink('Theme') . "):</FONT COLOR><BR>\n"; echo "        <SELECT NAME=Theme TABINDEX=14>\n"; $szAllThemes = "          <OPTION VALUE=\"\">$LOCALE[COMMON_Topic]</OPTION>\n"; $hModules = opendir("$CONFIG[System_Root]/$CONFIG[MWCHAT_Themes]"); while($szSrtFile = readdir($hModules)) { unset($szChecked); if ($rgInfo[theme] == $szSrtFile) { $szChecked = "SELECTED"; } if ($szSrtFile == ".htaccess" or $szSrtFile == "." or $szSrtFile == "..") { continue; } $szAllThemes .= "          <OPTION $szChecked VALUE=\"$szSrtFile\">$szSrtFile</OPTION>\n"; } echo "          $szAllThemes\n"; echo "        </SELECT><br><br>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "   <TR>\n"; echo "     <TD COLSPAN=2 ALIGN=CENTER>\n"; echo "        <BR><INPUT TYPE=SUBMIT VALUE=\"$LOCALE[OPTIONS_Button]\" TABINDEX=16>\n"; echo "     </TD>\n"; echo "   </TR>\n"; echo "  </TABLE>\n"; break; } } echo "  <CENTER>\n"; } else { echo "  <BR><BR> <B>$LOCALE[COMMON_Registered_Only]</B> <BR><BR><BR><BR>\n"; } echo "  <HR><A HREF=\"#\" onClick=\"self.close()\">$LOCALE[COMMON_Click_Close]</A>\n"; require_once("$CONFIG[MWCHAT_Libs]/footer.php"); ?>
