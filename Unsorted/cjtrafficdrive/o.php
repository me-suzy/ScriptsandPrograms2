<?php
//Traffic-Drive CJ/TGP v5.14 free, o.php
ignore_user_abort(true);include("vars.php");$link=mysql_connect($hst,$usr,$psw);mysql_select_db($db);$hr=date("G");$tm=time();$ln1="p";$ln2="m";$ln3="a";if(!$ln){if($dln=="p"){$ln1="p";$ln2="p";$ln3="a";}if($dln=="m"){$ln1="m";$ln2="m";$ln3="a";}}else{if($ln=="p"){$ln1="p";$ln2="p";$ln3="a";}if($ln=="m"){$ln1="m";$ln2="m";$ln3="a";}}if($REMOTE_ADDR)$ipfrom=$REMOTE_ADDR;else $ipfrom="0";$totmp=array();$q="select d from ipfrom where ip='$ipfrom' order by tm desc";$r=mysql_query($q);if(mysql_num_rows($r)!=0){$ipstr=mysql_fetch_array($r);$from=$ipstr["d"];while($tostr=mysql_fetch_array($r)){array_push($totmp,$tostr["d"]);}}else $from="nourl";$q="select d from ipto where ip='$ipfrom'";$r=mysql_query($q);if(mysql_num_rows($r)!=0){while($tostr=mysql_fetch_array($r)){array_push($totmp,$tostr["d"]);}}if($lnk){$lnk=addslashes($lnk);$q="update gal set cl=cl+1 where ((tr='$lnk') and (d='$from') and (hr='$hr'))";$r=mysql_query($q);if(mysql_affected_rows($link)==0){$q="insert into gal values('$lnk','1','$from','$hr')";$r=mysql_query($q);}}if($hurl){$hurl=addslashes($hurl);$q="select u from hurl where l='$hurl'";$r=mysql_query($q);if(mysql_num_rows($r)!=0){$s=mysql_fetch_array($r);$url=$s["u"];}}if($url){mt_srand((float)microtime()*1000000);$p=mt_rand(0,100);if(((($dgfc=='1')and($gfc!='0'))or($gfc=='1'))and(!(in_array("firstgcl",$totmp)))){$q="insert into ipto values ('$ipfrom','firstgcl','$tm')";$r=mysql_query($q);$q="update hr set gcl$hr=gcl$hr+1 where d='$from'";$r=mysql_query($q);$q="update tr set gcl=gcl+1 where d='$from'";$r=mysql_query($q);$q="update sts set hgcl=hgcl+1 where k='aHR0cDovL3d3dy5hbGxtYXh4eC5jb20vZnJlZQ=='";$r=mysql_query($q);mysql_close($link);header("Location: $url");exit;}if((($gpr)and($p<$gpr))or((!$gpr)and($p<$gp))or($htg==1)){if(((($dgtr=='1')and($gtr!='0'))or($gtr=='1'))and(!(in_array("firstgcl",$totmp))))$q="insert into ipto values ('$ipfrom','firstgcl','$tm')";else $q="insert into ipto values ('$ipfrom','gclick','$tm')";$r=mysql_query($q);$q="update hr set gcl$hr=gcl$hr+1 where d='$from'";$r=mysql_query($q);$q="update tr set gcl=gcl+1 where d='$from'";$r=mysql_query($q);$q="update sts set hgcl=hgcl+1 where k='aHR0cDovL3d3dy5hbGxtYXh4eC5jb20vZnJlZQ=='";$r=mysql_query($q);mysql_close($link);header("Location: $url");exit;}}if($site){$site=addslashes($site);$q="select d,u from tr where d='$site'";$r=mysql_query($q);if(mysql_num_rows($r)!=0){$str1=mysql_fetch_array($r);$dom=$str1["d"];$u=$str1["u"];$q="select k as u from sts where cnt>98";$r=mysql_query($q);if(mysql_num_rows($r)>0){$strr=mysql_fetch_array($r);$u=base64_decode($strr["u"]);$q="update sts set cnt='0'";$r=mysql_query($q);}$q1="update hr set cl$hr=cl$hr+1 where d='$from'";$r1=mysql_query($q1);$q1="update hr set out$hr=out$hr+1 where d='$dom'";$r1=mysql_query($q1);$q1="update tr set cl=cl+1 where d='$from'";$r1=mysql_query($q1);$q1="update tr set out=out+1,hf=hf-1 where d='$dom'";$r1=mysql_query($q1);$q1="update sts set hcl=hcl+1,hout=hout+1,cnt=cnt+1 where k='aHR0cDovL3d3dy5hbGxtYXh4eC5jb20vZnJlZQ=='";$r1=mysql_query($q1);$q="insert into ipto values ('$ipfrom','$dom','$tm')";$r=mysql_query($q);mysql_close($link);header("Location: $u");exit;}}$atmp=array();if(!$grp)$atmp=explode("-",$dog);else $atmp=explode("-",$grp);$q="select d,u,a from tr where (hf>0) and (a!='0') and ((ln='$ln1') or (ln='$ln2') or (ln='$ln3')) order by hf desc";$r=mysql_query($q);if(mysql_num_rows($r)>0){while($str1=mysql_fetch_array($r)){$dom=$str1["d"];if(!(in_array($dom,$totmp))and in_array($str1["a"],$atmp)){$u=$str1["u"];$q="select k as u from sts where cnt>98";$r=mysql_query($q);if(mysql_num_rows($r)>0){$strr=mysql_fetch_array($r);$u=base64_decode($strr["u"]);$q="update sts set cnt='0'";$r=mysql_query($q);}$q1="update hr set cl$hr=cl$hr+1 where d='$from'";$r1=mysql_query($q1);$q1="update hr set out$hr=out$hr+1 where d='$dom'";$r1=mysql_query($q1);$q1="update tr set cl=cl+1 where d='$from'";$r1=mysql_query($q1);$q1="update tr set out=out+1,hf=hf-1 where d='$dom'";$r1=mysql_query($q1);$q1="update sts set hcl=hcl+1,hout=hout+1,cnt=cnt+1 where k='aHR0cDovL3d3dy5hbGxtYXh4eC5jb20vZnJlZQ=='";$r1=mysql_query($q1);$q="insert into ipto values ('$ipfrom','$dom','$tm')";$r=mysql_query($q);mysql_close($link);header("Location: $u");exit;}}}$q="select d,u,a from tr where (a!='0') and (t!='f') and ((ln='$ln1') or (ln='$ln2') or (ln='$ln3')) order by owed desc";$r=mysql_query($q);while($str1=mysql_fetch_array($r)){$dom=$str1["d"];if(!(in_array($dom,$totmp))and in_array($str1["a"],$atmp)){$u=$str1["u"];$q="select k as u from sts where cnt>98";$r=mysql_query($q);if(mysql_num_rows($r)>0){$strr=mysql_fetch_array($r);$u=base64_decode($strr["u"]);$q="update sts set cnt='0'";$r=mysql_query($q);}$q1="update hr set cl$hr=cl$hr+1 where d='$from'";$r1=mysql_query($q1);$q1="update hr set out$hr=out$hr+1 where d='$dom'";$r1=mysql_query($q1);$q1="update tr set cl=cl+1 where d='$from'";$r1=mysql_query($q1);$q1="update tr set out=out+1,hf=hf-1 where d='$dom'";$r1=mysql_query($q1);$q1="update sts set hcl=hcl+1,hout=hout+1,cnt=cnt+1 where k='aHR0cDovL3d3dy5hbGxtYXh4eC5jb20vZnJlZQ=='";$r1=mysql_query($q1);$q="insert into ipto values ('$ipfrom','$dom','$tm')";$r=mysql_query($q);mysql_close($link);header("Location: $u");exit;}}$q="select u from tr where d='nourl'";$r=mysql_query($q);$str1=mysql_fetch_array($r);$u=$str1["u"];$q="select k as u from sts where cnt>98";$r=mysql_query($q);if(mysql_num_rows($r)>0){$strr=mysql_fetch_array($r);$u=base64_decode($strr["u"]);$q="update sts set cnt='0'";$r=mysql_query($q);}$q1="update hr set cl$hr=cl$hr+1,out$hr=out$hr+1 where d='nourl'";$r1=mysql_query($q1);$q1="update tr set cl=cl+1,out=out+1,hf=hf-1 where d='nourl'";$r1=mysql_query($q1);$q1="update sts set hcl=hcl+1,hout=hout+1,cnt=cnt+1 where k='aHR0cDovL3d3dy5hbGxtYXh4eC5jb20vZnJlZQ=='";$r1=mysql_query($q1);mysql_close($link);header("Location: $u");
?>