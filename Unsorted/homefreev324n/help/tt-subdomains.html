 
<HTML>
     <HEAD>
         <TITLE>Program Documentation :: Home Free :: Tips and Tricks :: Subdomains</TITLE>
         <META NAME="Description" CONTENT="">
         <META NAME="Keywords" CONTENT="">

<script language="JavaScript">
<!-- 
 function goHist(a) 
 {
 history.go(a);
 }
// -->
</script>

<style type="text/css">
//<!--
body { font-family: Arial, Helvetica, sans-serif; font-size: 10pt}
th { font-family: Arial, Helvetica, sans-serif; font-size: 10pt; font-weight: bold; background-color: #FFFFFF;}
td { font-family: Arial, Helvetica, sans-serif; font-size: 10pt;}
form { font-family: Arial, Helvetica, sans-serif; font-size: 10pt}
h1 { font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 14pt; font-weight: bold}
A:link { text-decoration: none; color: blue}
A:visited { text-decoration: none; color: Navy}
A:hover { text-decoration: underline; color: red}
A:link.nav { color: #000000}
A:visited.nav { color: #000000}
A:hover.nav { color: red;}
.nav { font-family: Verdana, Arial, Helvetica, sans-serif; color: #000000}
.std { font-family: Arial, Helvetica, sans-serif; font-size: 8pt;}
.sml {font-family: Arial, Helvetica, sans-serif; font-size: 1pt;}
//-->
</style>
    </HEAD>

     <BODY LEFTMARGIN="5" RIGHTMARGIN="5" TOPMARGIN="5" bgcolor="#666699" TEXT="#000000" LINK="blue" VLINK="navy" ALINK="blue">
        <!-- SPACER BAR -->
        <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" BGCOLOR="#000000" WIDTH="100%">
            <TR>
                <TD HEIGHT="5"><IMG SRC="/images/solutions/black.gif" WIDTH="590" HEIGHT="5" BORDER="0" ALT="*"></TD>
            </TR>
        </TABLE>
        <!-- HEADER -->
        <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" BGCOLOR="#000000" WIDTH="100%">
            <TR>
                <TD BGCOLOR="#000000" WIDTH="5"><IMG SRC="/images/solutions/black.gif" WIDTH="1" HEIGHT="1" ALT="" BORDER="0" HSPACE="0" VSPACE="0"></TD>
                <TD BGCOLOR="#333399" ALIGN="left" VALIGN="middle"></TD>
                <TD BGCOLOR="#000000" WIDTH="5"><IMG SRC="/images/solutions/black.gif" WIDTH="1" HEIGHT="1" ALT="" BORDER="0" HSPACE="0" VSPACE="0"></TD>
            </TR>
        </TABLE>
        <!-- SPACER BAR -->
        <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" BGCOLOR="#000000" WIDTH="100%">
            <TR>
                <TD HEIGHT="5"><IMG SRC="/images/solutions/black.gif" WIDTH="590" HEIGHT="5" BORDER="0" ALT="*"></TD>
            </TR>
        </TABLE>
        <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" BGCOLOR="#000000" WIDTH="100%">
            <TR>
                <TD BGCOLOR="#000000" WIDTH="5"><IMG SRC="/images/solutions/black.gif" WIDTH="1" HEIGHT="1" ALT="" BORDER="0" HSPACE="0" VSPACE="0"></TD>
                <TD BGCOLOR="LightSteelBlue" align=left>
                    <TABLE border="0" cellpadding=2 cellspacing=0 bgcolor="LightSteelBlue" width="100%">
                        <TR>
                            <TD NOWRAP>&nbsp; <B>:: <A HREF="install.html">Installing</A> :: <A HREF="upgrade.html">Upgrading</A> :: <A HREF="move.html">Moving Installed Version</A> :: <A HREF="manual.html">User Manual</A> :: <A HREF="tt.html">Tricks &amp; Tips</A> :: <A HREF="readme.txt">Readme.txt</A> :: </b></td>
                            <TD valign=center align=right><font class="sml"><FORM METHOD="post"><INPUT TYPE="button" VALUE="Back" onClick="goHist(-1)"></form></font></td>
                        </TR>
                    </TABLE>
                     </TD>
                <TD BGCOLOR="#000000" WIDTH="5"><IMG SRC="/images/solutions/black.gif" WIDTH="1" HEIGHT="1" ALT="" BORDER="0" HSPACE="0" VSPACE="0"></TD>
            </TR>
        </TABLE>
        <TABLE cellpadding=5 cellspacing=0 border=0 bgcolor="#000000" width="100%">
            <TR>
                <TD>
                    <TABLE cellpadding=0 cellspacing=0 border=0 width="100%">
                        <TR>
                            <!-- START MENU TABLE -->
                            <TD bgcolor="LightSteelBlue" valign=top width=130> <img src="/images/solutions/black.gif" width=130 height="5" border="0"><BR>
                                 <BR>
                                 <FORM ACTION="notta" method=post>
                                <TABLE width="95%" bgcolor="#333399" cellpadding=1 border="0" cellspacing=0 align=center>
                                    <TR>
                                        <TD>
                                            <TABLE width="100%" bgcolor="LightSteelBlue" cellpadding=3 cellspacing=0 border="0">
                                                <TR>
                                                    <TD bgcolor="#333399" align=center></TD>
                                                </TR>
                                                <TR>
                                                    <TD align=center> <INPUT TYPE=TEXT NAME="address" value="HomeFree v3.24n" size=8> <FONT CLASS=std>hacked by:<br>
                                                         <b>Nearly Null (-NnN-)</b><br>
                                                         </FONT> </TD>
                                                </TR>
                                            </TABLE>
                                             </TD>
                                    </TR>
                                </TABLE>
                                 </FORM> </TD>
                            <TD BGCOLOR="#000000" WIDTH="5"><IMG SRC="/images/solutions/black.gif" WIDTH="5" HEIGHT="1" ALT="" BORDER="0" HSPACE="0" VSPACE="0"></TD>
                            <TD bgcolor=white width="100%" valign=top>
                                <TABLE cellpadding=6 width="100%">
                                    <TR>
                                        <TD width="100%">
                                            <!-- START CONTENT -->
                                             <BR>
                                             <font size=+1> Subdomains </FONT> <BR>
                                             <FONT CLASS=std>Posted on: March 7, 2000, 3:20 a.m. </FONT> <BR>
                                             <BR>
                                             <B><b>Home Free and subdomains, the real sotry</B></B> <BR>
                                             <BR>
                                             Recently we have gotten many people asking us if Home Free has the capability to allow their users subdomains, as in: <I>username</I>.domain.com. <BR>
                                             <BR>
                                             The answer is no, but don't look so disappointed. Home Free can't, but Apache can. If your running the Apache webserver and the mod_rewite module is installed, giving subdomains to your users is as easy as adding 10 lines of new text to the Apache Configuration files. If you check the demo here on hf-online.com you will notice we have done this, and any base account can be accessed as <i>username</I>.hf-online.com or www.<i>username</I>.hf-online.com. These 10 lines work for every new user as well, nothing new needs to be added or hacked when a new member signs on. This setup will allow users in the base directory as well as categories to have subdomains, sub-categories will not work. Users in categories will have to use the url with the category in it. <I>username</I>.<I>category</I>.domain.com <BR>
                                             <BR>
                                             <B>Subdomain Setup</B> <BR>
                                             <BR>
                                             <B>1.</B> The first step is to make sure your dns for your domain can handle wildcards. If it can not then you either can not use subdomains, or must update your dns records to allow wildcards. To test your domain, try typing into an address bar of any browser <I>wildcards.yourdoamin.tld</I> (of course inserting your domain) If your front page of your website appears you can continue, wildcards are on, if you get a dns error or error of anykind, wildcards are not on and the dns for your domain must be changed. <BR>
                                             <BR>
                                             <B>2.</B> Make sure mod_rewrite is install and on, some claim mod_rewite does not come installed by default, but from what I have seen it does for most. <BR>
                                             <BR>
                                             <B>3.</B> Open your apache http.conf configuration file and add the following to the bottom: <BR>
                                             <BR>
                                            <TABLE bgcolor=#e1e1e1 cellpadding=3 border=0>
                                                <TR>
                                                    <TD><font face=arial size=-2> Rewritelog logs/rewrite.log<BR>
                                                         RewritelogLevel 9 <BR>
                                                         <BR>
                                                         RewriteMap &nbsp; &nbsp; &nbsp; lowercase &nbsp; &nbsp; &nbsp; int:tolower<BR>
                                                         RewriteEngine on <BR>
                                                         <BR>
                                                         RewriteCond &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}} &nbsp; &nbsp; &nbsp; !^$<BR>
                                                         RewriteCond &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}} &nbsp; &nbsp; &nbsp; !^www\.hf-online.com$ <BR>
                                                         <BR>
                                                         RewriteCond &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}} &nbsp; &nbsp; &nbsp; ^(www\.|)([^.]+)\.hf-online\.com$<BR>
                                                         RewriteRule &nbsp; &nbsp; &nbsp; ^(.+) &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}}$1 &nbsp; &nbsp; &nbsp; [C]<BR>
                                                         RewriteRule &nbsp; &nbsp; &nbsp; ^(www\.|)([^.]+)\.hf-online\.com(.*) &nbsp; &nbsp; &nbsp; /users/$2$3 &nbsp; &nbsp; &nbsp; [L] <BR>
                                                         <BR>
                                                         RewriteCond &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}} &nbsp; &nbsp; &nbsp; ^(www\.|)[^.]+\.[^.]+\.hf-online\.com$<BR>
                                                         RewriteRule &nbsp; &nbsp; &nbsp; ^(.+) &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}}$1 &nbsp; &nbsp; &nbsp; [C]<BR>
                                                         RewriteRule &nbsp; &nbsp; &nbsp; ^(www\.|)([^.]+)\.([^.]+)\.hf-online\.com(.*) &nbsp; &nbsp; &nbsp; /users/$3/$2$4 &nbsp; &nbsp; &nbsp; [L] </font></TD>
                                                </TR>
                                            </TABLE>
                                             <BR>
                                             <BR>
                                             The first 2 lines: <BR>
                                             <BR>
                                            <TABLE bgcolor=#e1e1e1 cellpadding=3 border=0>
                                                <TR>
                                                    <TD><font face=arial size=-2> Rewritelog &nbsp; &nbsp; logs/rewrite.log<BR>
                                                         RewritelogLevel &nbsp; &nbsp; 9 </font></TD>
                                                </TR>
                                            </TABLE>
                                             <BR>
                                             <BR>
                                             are used for debugging purposes, if something is not working right, like the subdomains are not forwarding correctly, look in the rewrite.log in your logs directory. It will help you figure out what is going wrong. These 2 lines should be commented out once everything is working ok. Comment by adding a <B>#</B> in front of them. <BR>
                                             <BR>
                                             The next to lines, tell Apache we are going to use mod_rewrite and also set the lowercase function. (so the subdomains are case insensative) <BR>
                                             <BR>
                                             The next 2 lines check and see if a subdomain exists (if one doesn't, no further mod_rewriting is done) and also makes sure the subdomain is not <I>www</I> <BR>
                                             <BR>
                                             The next 6 lines are basically the same 3 lines written twice. The bottom 2 set of 3 lines is used for the category subdomains and can be removed if you do not use categories. This setup also allows your users to use www.<I>username</I>.domain.com and allow the www to be dropped and <I>username</I>.domain.com to also work. <BR>
                                             <BR>
                                             You need to replace <I>hf-online\.com</I> with your domain name, keeping in mind to put a \ before the . You also need to replace the <i>/users</I> with the virtual directory to your base directory for Home Free users. Thus if your members currently access their sites at domain.com/members/username you would replace user with members <BR>
                                             <BR>
                                            <TABLE bgcolor=#e1e1e1 cellpadding=3 border=0>
                                                <TR>
                                                    <TD><font face=arial size=-2> Rewritelog logs/rewrite.log<BR>
                                                         RewritelogLevel 9 <BR>
                                                         <BR>
                                                         RewriteMap &nbsp; &nbsp; &nbsp; lowercase &nbsp; &nbsp; &nbsp; int:tolower<BR>
                                                         RewriteEngine on <BR>
                                                         <BR>
                                                         RewriteCond &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}} &nbsp; &nbsp; &nbsp; !^$<BR>
                                                         RewriteCond &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}} &nbsp; &nbsp; &nbsp; !^www\.<FONT COLOR=RED>hf-online.com</FONT>$ <BR>
                                                         <BR>
                                                         RewriteCond &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}} &nbsp; &nbsp; &nbsp; ^(www\.|)([^.]+)\.<FONT COLOR=RED>hf-online\.com</FONT>$<BR>
                                                         RewriteRule &nbsp; &nbsp; &nbsp; ^(.+) &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}}$1 &nbsp; &nbsp; &nbsp; [C]<BR>
                                                         RewriteRule &nbsp; &nbsp; &nbsp; ^(www\.|)([^.]+)\.<FONT COLOR=RED>hf-online\.com</FONT>(.*) &nbsp; &nbsp; &nbsp; /<FONT COLOR=RED>users</FONT>/$2$3 &nbsp; &nbsp; &nbsp; [L] <BR>
                                                         <BR>
                                                         RewriteCond &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}} &nbsp; &nbsp; &nbsp; ^(www\.|)[^.]+\.[^.]+\.<FONT COLOR=RED>hf-online\.com</FONT>$<BR>
                                                         RewriteRule &nbsp; &nbsp; &nbsp; ^(.+) &nbsp; &nbsp; &nbsp; ${lowercase:%{HTTP_HOST}}$1 &nbsp; &nbsp; &nbsp; [C]<BR>
                                                         RewriteRule &nbsp; &nbsp; &nbsp; ^(www\.|)([^.]+)\.([^.]+)\.<FONT COLOR=RED>hf-online\.com</FONT>(.*) &nbsp; &nbsp; &nbsp; /<FONT COLOR=RED>users</FONT>/$3/$2$4 &nbsp; &nbsp; &nbsp; [L] </font></TD>
                                                </TR>
                                            </TABLE>
                                             <BR>
                                             <BR>
                                             <B>4.</B> Thats it. Upload your http.conf file, restart apache and test. If you do not get redirected to the proper place, check your rewrite.log dir. If everything is working fine, be sure to remove the 2 debugging lines. Now email your users and let them know of your new feature. <BR>
                                             <BR>
                                             For more fun with mod_rewrite, check the <A HREF="http://www.engelschall.com/pw/apache/rewriteguide">Apache mod_rewrite users guide</A> <BR>
                                             <BR>
                                             <BR>
                                             <BR>
                                             </TD>
                                    </TR>
                                </TABLE>
                                 </TD>
                        </TR>
                    </TABLE>
                     </TD>
            </TR>
        </TABLE>
        <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" BGCOLOR="#000000" WIDTH="100%">
            <TR>
                <TD BGCOLOR="#000000" WIDTH="5"><IMG SRC="/images/solutions/black.gif" WIDTH="5" HEIGHT="1" ALT="" BORDER="0" HSPACE="0" VSPACE="0"></TD>
                <TD bgcolor="#333399" align=right width="100%">
                    <table border="0" cellpadding=0 cellspacing=0 width="100%">
                        <TR>
                            <TD CLASS="STD"><font color="LightSteelBlue"> </FONT></TD>
                            <TD align=right CLASS="STD"><font color="#FFFFFF">Copyright &copy; 1997- 2000 Solution Scripts.&nbsp;&nbsp;&nbsp;&nbsp;</FONT></TD>
                        </TR>
                    </TABLE>
                     </TD>
                <TD BGCOLOR="#000000" WIDTH="5"><IMG SRC="/images/solutions/black.gif" WIDTH="5" HEIGHT="1" ALT="" BORDER="0" HSPACE="0" VSPACE="0"></TD>
            </TR>
        </TABLE>
        <!-- SPACER BAR -->
        <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" BGCOLOR="#000000" WIDTH="100%">
            <TR>
                <TD HEIGHT="5"><IMG SRC="/images/solutions/black.gif" WIDTH="590" HEIGHT="5" BORDER="0" ALT="*"></TD>
            </TR>
        </TABLE>
    </BODY>
</HTML>
 