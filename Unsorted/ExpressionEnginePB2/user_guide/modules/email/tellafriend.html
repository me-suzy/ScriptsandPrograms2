<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />

  <title>Tell-a-Friend Form &#8211; ExpressionEngine Documentation</title>

  <meta name="MSSmartTagsPreventParsing" content="TRUE" />
  <link rel="contents" href="../../index.html" />
  <style type="text/css" media="screen,print">@import url(../../docs.css);</style>
</head>

<body>

<div id="header">
	<h1>ExpressionEngine Documentation</h1>
</div>


<div id="navlinks">
	<p><a href="../../index.html">Table of Contents</a></p>
</div>


<div id="content">

	<h1>Tell-A-Friend Form</h1>

	<p>The purpose of this tag is to display a form used to share an entry with someone by sending them an email about it.  To show your tell-a-friend form use this tag pair:</p>

	<code>{exp:email:tell_a_friend}<br />
<br />
{/exp:email:tell_a_friend}</code>

	<p>The tell-a-friend form is created pretty much like a normal form, only you don't specify the opening and closing form tags; ExpressionEngine takes care of those for you. There are also numerous possible variables that are available in order to auto-fill fields in the form, and also a few tag parameters to specify form handling and hidden recipients. Here's an example of how a tell-a-friend form could be created:</p>

	<code>{exp:email:tell_a_friend charset="utf-8" allow_html='n'}<br />
<br />
&lt;p>&lt;label for="from">Your Email: &lt;/label>&lt;br /><br />
&lt;input type="text" id="from" name="from" size="40" maxlength="35" value="{member_email}" />&lt;/p><br />
<br />
&lt;p>&lt;label for="name">Your Name: &lt;/label>&lt;br /><br />
&lt;input type="text" id="name" name="name" size="40" maxlength="35" value="{member_name}" />&lt;/p><br />
<br />
&lt;p>&lt;label for="to">To: &lt;/label>&lt;br /><br />
&lt;input type="text" id="to" name="to" size="40" maxlength="35" />&lt;/p><br />
<br />
&lt;p>&lt;label for="subject">Subject: &lt;/label>&lt;br /><br />
&lt;input type="text" id="subject" name="subject" size="40" value="Entry by: {author}" />&lt;/p><br />
<br />
&lt;p>&lt;label for="message">Message: &lt;/label>&lt;br /><br />
&lt;textarea id="message" name="message" rows="18" cols="40"><br />
{summary}<br />
{body}<br />
{permalink}<br />
&lt;/textarea>&lt;/p><br />
<br />
&lt;p>&lt;input name="submit" type='submit' value='Submit Form' />&lt;/p><br />
{/exp:email:tell_a_friend}</code>


	<h3>Linking to the Tell-a-Friend page</h3>

	<p>In order to use the Tell-a-Friend feature, you will need to link to it.  First, create a Template and place the Tell-a-Friend form in this Template.</p>

	<p>You will then need to add a link to your new Tell-a-Friend Template from within your weblog entry.  In your weblog tag <samp>{exp:weblog:entries}</samp> you can point to it using the permalink variable:</p>

	<code>&lt;a href="{title_permalink=weblog/friend}">Tell-a-Friend&lt;/a></code>

	<p>In the above example, the Template "friend" contains the Tell-a-Friend form.</p>




	<h2>Parameters</h2>

	<ul class="minitoc">
		<li><a href="#par_allow_html">allow_html="y"</a></li>
		<li><a href="#par_charset">charset="utf-8"</a></li>
		<li><a href="#par_recipients">recipients="you@example.com"</a></li>
		<li><a href="#par_return">return="http://www.example.com/index.php"</a></li>
	</ul>


	<h3><a name="par_allow_html">allow_html=</a></h3>

		<code>allow_html="y"</code>
		<code>allow_html="&lt;p>,&lt;a>"</code>
		<code>allow_html="n"</code>

		<p>The weblog entry variables (see Weblog Variables below) are formatted according to the formatting specified when the entry was submitted, so there is a possibility of HTML being output.  This parameter allows you the choice of whether to keep the HTML in the form fields, allow only certain HTML tags (by specifying the tags as a comma-separated list), or allow no HTML to remain. If HTML is left in, then the email will be automatically sent as an HTML email.</p>


	<h3><a name="par_charset">charset=</a></h3>

		<code>charset="utf-8"</code>

		<p>This allows you to set the character set of the email being sent. Use this if you form's template is using a character set other than iso-8859-1.</p>


	<h3><a name="par_recipients">recipients=</a></h3>

		<code>recipients="admin@example.com"</code>

		<p>You may specify hidden recipients for the form.  This is who will receive the submitted information.  You may specify more than one recipient by separating the email addresses with commas:</p>

		<code>recipients="admin@example.com,ceo@example.com,president@example.com"</code>


	<h3><a name="par_return">return=</a></h3>

		<code>return="http://www.example.com/index.php"</code>

		<p>This parameter lets the admin specify to where the user is directed after the form is submitted.  Upon submission, the user is presented with a standard "thank you" message and a link.  The <samp>return</samp> parameter lets the location for the link be specified.</p>



	<h2>Variables</h2>

	<ul class="minitoc">
		<li><a href="#var_member_email">{member_email}</a></li>
		<li><a href="#var_member_name">{member_name}</a></li>
	</ul>


	<h3><a name="var_member_email">member_email</a></h3>

		<code>{member_email}</code>

		<p>If a user is logged in, then it will display their email address as recorded in their member profile.</p>


	<h3><a name="var_member_name">member_name</a></h3>

		<code>{member_name}</code>

		<p>If a user is logged in, then it will display their screen name as recorded in their member profile.</p>



	<h2>Weblog Variables</h2>

	<code>{title}<br />
	{permalink}<br />
	{author}<br />
	{body}<br />
	et cetera...</code>

	<p>Many of the <a href="../../templates/weblog/variables.html">Weblog Entries Tag Variables</a> are available for the tell-a-friend form.  Notable exceptions are all category related variables and custom member fields.</p>

	<p><b>Note</b>: To ease the useability of this form with multiple weblogs, which will possibly contain different custom fields, all Weblog Variables that are unfillable will be removed from the form.</p>

	<p>For example, if you have a weblog with custom fields of summary and body, and then another weblog with custom fields of ingredients and directions, you will be able to put the following in the 'message' textarea:  <samp>{summary} {body} {ingredients} {directions}</samp>.  If an entry linking to the tell-a-friend form is from weblog one, then the first two custom fields will be filled and the second two will be ignored.  If an entry from weblog 2 is linking to the tell-a-friend form, then the first two will be ignored and the second two will be filled out.</p>



	<h2>Form Fields</h2>

	<ul class="minitoc">
		<li><a href="#form_from">from</a></li>
		<li><a href="#form_message">message</a></li>
		<li><a href="#form_name">name</a></li>
		<li><a href="#form_required">required</a></li>
		<li><a href="#form_subject">subject</a></li>
		<li><a href="#form_to">to</a></li>
	</ul>


	<h3><a name="form_from">from</a></h3>

		<code>&lt;input type="text" name="from" size="40" /></code>

		<p>Email address of person who is sending the email.</p>


	<h3><a name="form_message">message</a></h3>

		<code>&lt;textarea name="required" rows="10" cols="40">&lt;/textarea></code>

		<p>Main message of the email. If you do not wish to have the tell-a-friend message modified then we suggest using a hidden form field or setting the textarea as read only (ex:  <samp>&lt;textarea readonly="readonly">&lt;/textarea></samp>)</p>


	<h3><a name="form_name">name</a></h3>

		<code>&lt;input type="text" name="name" size="40" /></code>

		<p>Name of person who is sending the email.</p>


	<h3><a name="form_required">required</a></h3>

		<code>&lt;textarea name="required" rows="5" cols="40" readonly="readonly">&lt;/textarea></code>

		<p>Field allows you to have required information that is included at top of each email message.  Useful for support emails where the information can be read only or hidden.</p>


	<h3><a name="form_subject">subject</a></h3>

		<code>&lt;input type="text" name="subject" size="40" /></code>

		<p>Subject of the email that is being sent.</p>


	<h3><a name="form_to">to</a></h3>

		<code>&lt;input type="text" name="to" size="40" /></code>

		<p>Email address to which the email is being sent.  Multiple email addresses may be specified by separating them with a comma.</p>




</div>


<div id="footer">
  <address>ExpressionEngine &#8211; Copyright &#169; 2003-2004 &#8211; pMachine, Inc.</address><div class="validation"><a href="http://validator.w3.org/check/referer" title="Validate XHTML">XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate CSS">CSS</a></div>
</div>

</body>
</html>