<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />

  <title>Comment Module Tags &#8211; ExpressionEngine Documentation</title>

  <meta name="MSSmartTagsPreventParsing" content="TRUE" />
  <link rel="contents" href="../../index.html" />
  <style type="text/css" media="screen,print">@import url(../../docs.css);</style>
</head>

<body>

<div id="header">
	<h1>ExpressionEngine Documentation</h1>
</div>


<div id="navlinks">
	<p><a href="../../index.html">Table of Contents</a></p>
</div>


<div id="content">

	<h1>Comment Module Tags</h1>

	<p>A basic example of the Comment tag:</p>

	<code>{exp:comment:entries sort="asc" limit="20"}<br />
<br />
{comment}<br />
<br />
&lt;p>By {name} on {comment_date format="%Y %m %d"}&lt;/p><br />
<br />
{/exp:comment:entries}</code>


	<h2>Parameters</h2>

	<ul class="minitoc">
		<li><a href="#par_limit">limit="30"</a></li>
		<li><a href="#par_sort">sort="asc"</a></li>
		<li><a href="#par_weblog">weblog="news"</a></li>
	</ul>


	<h3><a name="par_limit">limit=</a></h3>

		<code>limit="30"</code>

		<p>Allows you to limit the number of comments.</p>


	<h3><a name="par_sort">sort=</a></h3>

		<code>sort="asc" or sort="desc"</code>

		<p>The sort order can be "asc" (ascending order or "oldest item first") or "desc" (descending order or "newest item first").  If you do not use a sort order the default is desc.</p>


	<h3><a name="par_weblog">weblog=</a></h3>

		<code>weblog="which"</code>

		<p>From which <a href="../cp/admin/weblog_administration/weblog_management.html">weblog</a> to show the comments (will show comments from any weblog if no weblog is specified).  Additionally, you can use the pipe character to separate multiple weblogs:</p>

		<code>weblog="weblog1|weblog2|weblog3"</code>

		<p>Or you can add the word "not" (with a space after it) to exclude weblogs:</p>

		<code>weblog="not weblog1|weblog2|weblog3"</code>

		<div class="important">
			<p>The <samp>weblog=</samp> parameter can have some security implications.  If you do <strong>not</strong> use this parameter then it is possible that people could see comments for a weblog entry to which they otherwise would not have access.  If you use multiple weblogs and want to make sure only certain people can see certain content, then you're encouraged to make use of this parameter.</p>
		</div>




	<h2>Variables</h2>

	<ul class="minitoc">
		<li><a href="#var_aol_im">{aol_im}</a></li>
		<li><a href="#var_comment">{comment}</a></li>
		<li><a href="#var_comment_date">{comment_date format="%Y %m %d"}</a></li>
		<li><a href="#var_edit_date">{edit_date format="%Y %m %d"}</a></li>
		<li><a href="#var_entry_id">{entry_id}</a></li>
		<li><a href="#var_icq">{icq}</a></li>
		<li><a href="#var_interests">{interests}</a></li>
		<li><a href="#var_ip_address">{ip_address}</a></li>
		<li><a href="#var_location">{location}</a></li>
		<li><a href="#var_msn_im">{msn_im}</a></li>
		<li><a href="#var_occupation">{occupation}</a></li>
		<li><a href="#var_name">{name}</a></li>
		<li><a href="#var_permalink">{permalink}</a></li>
		<li><a href="#var_switch">{switch="option_one|option_two}</a></li>
		<li><a href="#var_url_or_email">{url_or_email}</a></li>
		<li><a href="#var_url_or_email_as_author">{url_or_email_as_author}</a></li>
		<li><a href="#var_url_or_email_as_link">{url_or_email_as_link}</a></li>
		<li><a href="#var_weblog_id">{weblog_id}</a></li>
		<li><a href="#var_yahoo_im">{yahoo_im}</a></li>
		<li><a href="#var_custom_member_fields">Custom Member Fields</a></li>
	</ul>


	<h3><a name="var_aol_im">aol_im</a></h3>

		<code>{aol_im}</code>

		<p>The author's AOL IM account name</p>


	<h3><a name="var_comment">comment</a></h3>

		<code>{comment}</code>

		<p>The body of the comment</p>


	<h3><a name="var_comment_date">comment_date</a></h3>

		<code>{comment_date}</code>

		<p>The date of the comment.  As with other date variables, this one requires the "format" parameter in order to define how the date should be displayed.  See the <a href="date_variable_formatting.html">date variable formatting</a> page for more information.</p>

		<code>{comment_date format="%Y %m %d"}</code>


	<h3><a name="var_edit_date">edit_date</a></h3>

		<code>{edit_date}</code>

		<p>Same as above</p>


	<h3><a name="var_entry_id">entry_id</a></h3>

		<code>{entry_id}</code>

		<p>The ID number of the entry</p>


	<h3><a name="var_icq">icq</a></h3>

		<code>{icq}</code>

		<p>The author's ICQ IM user identification number</p>


	<h3><a name="var_interests">interests</a></h3>

		<code>{interests}</code>

		<p>The author's "interests" as entered in their profile</p>


	<h3><a name="var_ip_address">ip_address</a></h3>

		<code>{ip_address}</code>

	  <p>The IP address of the commenter</p>


	<h3><a name="var_location">location</a></h3>

		<code>{location}</code>

		<p>The author's location as entered in their profile</p>


	<h3><a name="var_msn_im">msn_im</a></h3>

		<code>{msn_im}</code>

		<p>The author's MSN IM account name</p>


	<h3><a name="var_occupation">occupation</a></h3>

		<code>{occupation}</code>

		<p>The author's occupation as entered in their profile</p>


	<h3><a name="var_name">name</a></h3>

		<code>{name}</code>

		<p>Name of the author</p>


	<h3><a name="var_permalink">permalink</a></h3>

		<code>{permalink}</code>

		<p>The URL to the actual comment with anchor.  Put this variable in	a link:</p>

		<code>&lt;a href="{permalink}">permanent link&lt;/a></code>


	<h3><a name="var_switch">switch=</a></h3>

		<code>{switch="option_one|option_two}</code>

		<p>This variable permits you to alternate between any two values as the entries are displayed.  The first entry will use "option_one", the second will use "option_two", the third "option_one", and so on.</p>

		<p>The most straightforward use for this would be to alternate colors.  It could be used like so:</p>

		<code>{exp:comment:entries}<br />
&lt;div class="{switch="one|two"}"><br />
&lt;h1>{name}&lt;/h1><br />
{comment}<br />
&lt;/div><br />
{/exp:comment:entries}</code>

		<p>The entries would then alternate between <samp>&lt;div class="one"></samp> and <samp>&lt;div class="two"></samp>.</p>

		<p>Multiple instances of the <samp>{switch=}</samp> tag may be used and the system will intelligently keep track of each one.</p>


	<h3><a name="var_url_or_email">url_or_email</a></h3>

		<code>{url_or_email}</code>

		<p>URL if it exists, otherwise the email address</p>


	<h3><a name="var_url_or_email_as_author">url_or_email_as_author</a></h3>

		<code>{url_or_email_as_author}</code>

		<p>Hyperlink or email link as author screen_name (or username if they haven't specified a screen name)</p>


	<h3><a name="var_url_or_email_as_link">url_or_email_as_link</a></h3>

		<code>{url_or_email_as_link}</code>

		<p>Same as above only it will display the URL or email address as a link</p>


	<h3><a name="var_weblog_id">weblog_id</a></h3>

		<code>{weblog_id}</code>

		<p>The ID number of the actual weblog</p>


	<h3><a name="var_yahoo_im">yahoo_im</a></h3>

		<code>{yahoo_im}</code>

		<p>The author's Yahoo IM account name</p>


	<h3><a name="var_custom_member_fields">Custom Member Fields</a></h3>

		<p>All custom member profile fields can be accessed using the "short name" of the field:</p>

		<code>{age}<br />
{gender}<br />
{zodiac}<br />
etc..</code>

		<p>These are totally dynamic in that any profile field you create for your members will automatically be available by its "short name" as a variable.</p>


	<h3>conditionals</h3>

		<p>Conditionals work in comments:</p>

		<code>{if name=="bozo"}<br />
	<br />
	You've got a big nose!<br />
	<br />
	{/if}</code>



	<h2>Comment Submission Form</h2>

	<code>{exp:comment:form}<br />
<br />
{/exp:comment:form}</code>


	<p>There is one required parameter in the comment form but only if you want to use the preview feature:</p>

	<code>{exp:comment:form preview="weblog/preview"}</code>

	<p>The "preview" parameter specifies the template group/template in which the
preview will be shown.  More on previewing later.</p>

	<p>The comment form is created pretty much like a normal form, only you don't specify the opening and closing form tags.  There are a few variables that are required in order to enable people's personal information (name, email, url, etc.) to appear in the form.  Here's how the comment form is typically created:</p>

	<code>{exp:comment:form preview="weblog/preview"}<br />
<br />
{if logged_out}<br />
<br />
&lt;p>Name: &lt;input type="text" name="name" value="{name}" size="50" />&lt;/p><br />
<br />
&lt;p>Email: &lt;input type="text" name="email" value="{email}" size="50" />&lt;/p><br />
<br />
&lt;p>Location: &lt;input type="text" name="location" value="{location}" size="50" />&lt;/p><br />
<br />
&lt;p>URL: &lt;input type="text" name="url" value="{url}" size="50" />&lt;/p><br />
<br />
{/if}<br />
<br />
&lt;p>&lt;textarea name="comment" cols="70" rows="10">{comment}&lt;/textarea>&lt;/p><br />
<br />
&lt;p>&lt;input type="checkbox" name="save_info" value="yes" {save_info} /> Remember my personal information&lt;/p><br />
<br />
&lt;p>&lt;input type="checkbox" name="notify_me" value="yes" {notify_me} /> Notify me of follow-up comments?&lt;/p><br />
<br />
&lt;input type="submit" name="submit" value="Submit" /><br />
&lt;input type="submit" name="preview" value="Preview" /><br />
<br />
{/exp:comment:form}</code>

	<p><b>Notes:</b><br />
The conditional variable <samp>{if not_logged_in}</samp> allows the system to show the short form (textarea only) if the user is a logged in member.  We recommend you use the form this way because if a member is logged in, their personal data is fetched automatically.</p>

	<p>Notice the variables in the "value" form fields?  These allow us to show the user's information in the form automatically if they click the "remember personal info" option.</p>


	<h2>Previewing</h2>

	<p>To preview a comment requires that you create a specific template for it. This template will contain at minimum two tags.  The first is the tag that shows the preview:</p>

	<code>{exp:comment:preview}<br />
<br />
{comment}<br />
<br />
{/exp:comment:preview}</code>

	<p>The second is the comment form tag from earlier.  This allows the comment to be displayed as well as the form containing the info so it can be previewed again or submitted.</p>


</div>


<div id="footer">
  <address>ExpressionEngine &#8211; Copyright &#169; 2003-2004 &#8211; pMachine, Inc.</address><div class="validation"><a href="http://validator.w3.org/check/referer" title="Validate XHTML">XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate CSS">CSS</a></div>
</div>

</body>
</html>